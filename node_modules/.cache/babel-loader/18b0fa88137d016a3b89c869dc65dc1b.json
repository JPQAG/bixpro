{"ast":null,"code":"'use strict';\n\nconst Exchange = require('./base/Exchange');\n\nconst {\n  ROUND\n} = require('./base/functions/number');\n\nconst {\n  ExchangeError,\n  ArgumentsRequired,\n  AuthenticationError,\n  InsufficientFunds,\n  InvalidOrder,\n  OrderNotFound\n} = require('./base/errors');\n\nmodule.exports = class rightbtc extends Exchange {\n  describe() {\n    return this.deepExtend(super.describe(), {\n      'id': 'rightbtc',\n      'name': 'RightBTC',\n      'countries': ['AE'],\n      'has': {\n        'cancelOrder': true,\n        'createOrder': true,\n        'privateAPI': false,\n        'fetchBalance': true,\n        'fetchClosedOrders': false,\n        'fetchMarkets': true,\n        'fetchMyTrades': true,\n        'fetchOHLCV': true,\n        'fetchOpenOrders': true,\n        'fetchOrder': 'emulated',\n        'fetchOrderBook': true,\n        'fetchOrders': true,\n        'fetchTicker': true,\n        'fetchTickers': true,\n        'fetchTrades': true\n      },\n      'timeframes': {\n        '1m': 'min1',\n        '5m': 'min5',\n        '15m': 'min15',\n        '30m': 'min30',\n        '1h': 'hr1',\n        '1d': 'day1',\n        '1w': 'week'\n      },\n      'urls': {\n        'logo': 'https://user-images.githubusercontent.com/51840849/87182092-1f372700-c2ec-11ea-8f9e-01b4d3ff8941.jpg',\n        'api': 'https://www.rightbtc.com/api',\n        'www': 'https://www.rightbtc.com',\n        'doc': ['https://docs.rightbtc.com/api/'] // eslint-disable-next-line no-useless-escape\n        // 'fees': 'https://www.rightbtc.com/\\#\\!/support/fee',\n\n      },\n      'api': {\n        'public': {\n          'get': [// 'getAssetsTradingPairs/zh', // 404\n          'trading_pairs', 'ticker/{trading_pair}', 'tickers', 'depth/{trading_pair}', 'depth/{trading_pair}/{count}', 'trades/{trading_pair}', 'trades/{trading_pair}/{count}', 'candlestick/latest/{trading_pair}', 'candlestick/{timeSymbol}/{trading_pair}', 'candlestick/{timeSymbol}/{trading_pair}/{count}']\n        },\n        'trader': {\n          'get': ['balance/{symbol}', 'balances', 'deposits/{asset}/{page}', 'withdrawals/{asset}/{page}', 'orderpage/{trading_pair}/{cursor}', 'orders/{trading_pair}/{ids}', // ids are a slash-separated list of {id}/{id}/{id}/...\n          'history/{trading_pair}/{ids}', 'historys/{trading_pair}/{page}', 'trading_pairs'],\n          'post': ['order'],\n          'delete': ['order/{trading_pair}/{ids}']\n        }\n      },\n      // HARDCODING IS DEPRECATED, THE FEES BELOW SHOULD BE REWRITTEN\n      'fees': {\n        'trading': {\n          // min trading fees\n          // 0.0001 BTC\n          // 0.01 ETP\n          // 0.001 ETH\n          // 0.1 BITCNY\n          'maker': 0.1 / 100,\n          'taker': 0.2 / 100\n        },\n        'funding': {\n          'withdraw': {\n            // 'BTM': n => 3 + n * (1 / 100),\n            // 'ZDC': n => 1 + n * (0.5 / 100),\n            // 'ZGC': n => 0.5 + n * (0.5 / 100),\n            // 'BTS': n => 1 + n * (1 / 100),\n            // 'DLT': n => 3 + n * (1 / 100),\n            // 'SNT': n => 10 + n * (1 / 100),\n            // 'XNC': n => 1 + n * (1 / 100),\n            // 'ICO': n => 3 + n * (1 / 100),\n            // 'CMC': n => 1 + n * (0.5 / 100),\n            // 'GXS': n => 0.2 + n * (1 / 100),\n            // 'OBITS': n => 0.3 + n * (1 / 100),\n            // 'ICS': n => 2 + n * (1 / 100),\n            // 'TIC': n => 2 + n * (1 / 100),\n            // 'IND': n => 20 + n * (1 / 100),\n            // 'MVC': n => 20 + n * (1 / 100),\n            // 'BitCNY': n => 0.1 + n * (1 / 100),\n            // 'MTX': n => 1 + n * (1 / 100),\n            'ETP': 0.01,\n            'BTC': 0.0005,\n            'ETH': 0.005,\n            'ETC': 0.01,\n            'STORJ': 3,\n            'LTC': 0.01,\n            'ZEC': 0.001,\n            'BCC': 0.001,\n            'XRB': 0,\n            'NXS': 0.1\n          }\n        }\n      },\n      'commonCurrencies': {\n        'XRB': 'NANO'\n      },\n      'exceptions': {\n        'ERR_USERTOKEN_NOT_FOUND': AuthenticationError,\n        'ERR_ASSET_NOT_EXISTS': ExchangeError,\n        'ERR_ASSET_NOT_AVAILABLE': ExchangeError,\n        'ERR_BALANCE_NOT_ENOUGH': InsufficientFunds,\n        'ERR_CREATE_ORDER': InvalidOrder,\n        'ERR_CANDLESTICK_DATA': ExchangeError\n      }\n    });\n  }\n\n  async fetchMarkets(params = {}) {\n    // let zh = await this.publicGetGetAssetsTradingPairsZh ();\n    const markets = await this.publicGetTradingPairs(params);\n    const marketIds = Object.keys(markets);\n    const result = [];\n\n    for (let i = 0; i < marketIds.length; i++) {\n      const id = marketIds[i];\n      const market = markets[id];\n      const baseId = this.safeString(market, 'bid_asset_symbol');\n      const quoteId = this.safeString(market, 'ask_asset_symbol');\n      const base = this.safeCurrencyCode(baseId);\n      const quote = this.safeCurrencyCode(quoteId);\n      const symbol = base + '/' + quote;\n      const amountPrecision = this.safeString(market, 'bid_asset_decimals');\n      const pricePrecision = this.safeString(market, 'ask_asset_decimals');\n      const amountLimit = this.parsePrecision(amountPrecision);\n      const priceLimit = this.parsePrecision(pricePrecision);\n      const precision = {\n        'amount': parseInt(amountPrecision),\n        'price': parseInt(pricePrecision)\n      };\n      result.push({\n        'id': id,\n        'symbol': symbol,\n        'base': base,\n        'quote': quote,\n        'baseId': baseId,\n        'quoteId': quoteId,\n        'active': true,\n        'precision': precision,\n        'limits': {\n          'amount': {\n            'min': this.parseNumber(amountLimit),\n            'max': undefined\n          },\n          'price': {\n            'min': this.parseNumber(priceLimit),\n            'max': undefined\n          },\n          'cost': {\n            'min': undefined,\n            'max': undefined\n          }\n        },\n        'info': market\n      });\n    }\n\n    return result;\n  }\n\n  divideSafeNumber(x, key, divisor) {\n    const value = this.safeNumber(x, key);\n\n    if (value !== undefined) {\n      return value / divisor;\n    }\n\n    return value;\n  }\n\n  parseTicker(ticker, market = undefined) {\n    const symbol = market['symbol'];\n    const timestamp = this.safeInteger(ticker, 'date');\n    const last = this.divideSafeNumber(ticker, 'last', 1e8);\n    const high = this.divideSafeNumber(ticker, 'high', 1e8);\n    const low = this.divideSafeNumber(ticker, 'low', 1e8);\n    const bid = this.divideSafeNumber(ticker, 'buy', 1e8);\n    const ask = this.divideSafeNumber(ticker, 'sell', 1e8);\n    const baseVolume = this.divideSafeNumber(ticker, 'vol24h', 1e8);\n    return {\n      'symbol': symbol,\n      'timestamp': timestamp,\n      'datetime': this.iso8601(timestamp),\n      'high': high,\n      'low': low,\n      'bid': bid,\n      'bidVolume': undefined,\n      'ask': ask,\n      'askVolume': undefined,\n      'vwap': undefined,\n      'open': undefined,\n      'close': last,\n      'last': last,\n      'previousClose': undefined,\n      'change': undefined,\n      'percentage': undefined,\n      'average': undefined,\n      'baseVolume': baseVolume,\n      'quoteVolume': undefined,\n      'info': ticker\n    };\n  }\n\n  async fetchTicker(symbol, params = {}) {\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'trading_pair': market['id']\n    };\n    const response = await this.publicGetTickerTradingPair(this.extend(request, params));\n    const result = this.safeValue(response, 'result');\n\n    if (result === undefined) {\n      throw new ExchangeError(this.id + ' fetchTicker returned an empty response for symbol ' + symbol);\n    }\n\n    return this.parseTicker(result, market);\n  }\n\n  async fetchTickers(symbols = undefined, params = {}) {\n    await this.loadMarkets();\n    const response = await this.publicGetTickers(params);\n    const tickers = response['result'];\n    const result = {};\n\n    for (let i = 0; i < tickers.length; i++) {\n      const ticker = tickers[i];\n      const id = ticker['market'];\n\n      if (!(id in this.marketsById)) {\n        continue;\n      }\n\n      const market = this.marketsById[id];\n      const symbol = market['symbol'];\n      result[symbol] = this.parseTicker(ticker, market);\n    }\n\n    return this.filterByArray(result, 'symbol', symbols);\n  }\n\n  async fetchOrderBook(symbol, limit = undefined, params = {}) {\n    await this.loadMarkets();\n    const request = {\n      'trading_pair': this.marketId(symbol)\n    };\n    let method = 'publicGetDepthTradingPair';\n\n    if (limit !== undefined) {\n      method += 'Count';\n      request['count'] = limit;\n    }\n\n    const response = await this[method](this.extend(request, params));\n    const bidsasks = {};\n    const types = ['bid', 'ask'];\n\n    for (let ti = 0; ti < types.length; ti++) {\n      const type = types[ti];\n      bidsasks[type] = [];\n\n      for (let i = 0; i < response['result'][type].length; i++) {\n        const [price, amount, total] = response['result'][type][i];\n        bidsasks[type].push([price / 1e8, amount / 1e8, total / 1e8]);\n      }\n    }\n\n    return this.parseOrderBook(bidsasks, symbol, undefined, 'bid', 'ask');\n  }\n\n  parseTrade(trade, market = undefined) {\n    //\n    //     {\n    //         \"order_id\": 118735,\n    //         \"trade_id\": 7,\n    //         \"trading_pair\": \"BTCCNY\",\n    //         \"side\": \"B\",\n    //         \"quantity\": 1000000000,\n    //         \"price\": 900000000,\n    //         \"created_at\": \"2017-06-06T20:45:27.000Z\"\n    //     }\n    //\n    let timestamp = this.safeInteger(trade, 'date');\n\n    if (timestamp === undefined) {\n      timestamp = this.parse8601(this.safeString(trade, 'created_at'));\n    }\n\n    let id = this.safeString(trade, 'tid');\n    id = this.safeString(trade, 'trade_id', id);\n    const orderId = this.safeString(trade, 'order_id');\n    const price = this.divideSafeNumber(trade, 'price', 1e8);\n    let amount = this.safeNumber(trade, 'amount');\n    amount = this.safeNumber(trade, 'quantity', amount);\n\n    if (amount !== undefined) {\n      amount = amount / 1e8;\n    }\n\n    const marketId = this.safeString(trade, 'trading_pair');\n    const symbol = this.safeSymbol(marketId, market);\n    let cost = this.costToPrecision(symbol, price * amount);\n    cost = parseFloat(cost);\n    let side = this.safeStringLower(trade, 'side');\n\n    if (side === 'b') {\n      side = 'buy';\n    } else if (side === 's') {\n      side = 'sell';\n    }\n\n    return {\n      'id': id,\n      'info': trade,\n      'timestamp': timestamp,\n      'datetime': this.iso8601(timestamp),\n      'symbol': symbol,\n      'order': orderId,\n      'type': 'limit',\n      'side': side,\n      'takerOrMaker': undefined,\n      'price': price,\n      'amount': amount,\n      'cost': cost,\n      'fee': undefined\n    };\n  }\n\n  async fetchTrades(symbol, since = undefined, limit = undefined, params = {}) {\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'trading_pair': market['id']\n    };\n    const response = await this.publicGetTradesTradingPair(this.extend(request, params));\n    return this.parseTrades(response['result'], market, since, limit);\n  }\n\n  parseOHLCV(ohlcv, market = undefined) {\n    return [this.safeInteger(ohlcv, 0), parseFloat(ohlcv[2]) / 1e8, parseFloat(ohlcv[3]) / 1e8, parseFloat(ohlcv[4]) / 1e8, parseFloat(ohlcv[5]) / 1e8, parseFloat(ohlcv[1]) / 1e8];\n  }\n\n  async fetchOHLCV(symbol, timeframe = '5m', since = undefined, limit = undefined, params = {}) {\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'trading_pair': market['id'],\n      'timeSymbol': this.timeframes[timeframe]\n    };\n    const response = await this.publicGetCandlestickTimeSymbolTradingPair(this.extend(request, params));\n    const result = this.safeValue(response, 'result', []);\n    return this.parseOHLCVs(result, market, timeframe, since, limit);\n  }\n\n  async fetchBalance(params = {}) {\n    await this.loadMarkets();\n    const response = await this.traderGetBalances(params); //\n    //     {\n    //         \"status\": {\n    //             \"success\": 1,\n    //             \"message\": \"GET_BALANCES\"\n    //         },\n    //         \"result\": [\n    //             {\n    //                 \"asset\": \"ETP\",\n    //                 \"balance\": \"5000000000000\",\n    //                 \"frozen\": \"0\",\n    //                 \"state\": \"1\"\n    //             },\n    //             {\n    //                 \"asset\": \"CNY\",\n    //                 \"balance\": \"10000000000000\",\n    //                 \"frozen\": \"240790000\",\n    //                 \"state\": \"1\"\n    //             }\n    //         ]\n    //     }\n    //\n\n    const result = {\n      'info': response\n    };\n    const balances = this.safeValue(response, 'result', []);\n\n    for (let i = 0; i < balances.length; i++) {\n      const balance = balances[i];\n      const currencyId = this.safeString(balance, 'asset');\n      const code = this.safeCurrencyCode(currencyId);\n      const account = this.account(); // https://github.com/ccxt/ccxt/issues/3873\n\n      account['free'] = this.divideSafeNumber(balance, 'balance', 1e8);\n      account['used'] = this.divideSafeNumber(balance, 'frozen', 1e8);\n      result[code] = account;\n    }\n\n    return this.parseBalance(result);\n  }\n\n  async createOrder(symbol, type, side, amount, price = undefined, params = {}) {\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const order = {\n      'trading_pair': market['id'],\n      // We need to use decimalToPrecision here, since\n      //   0.036*1e8 === 3599999.9999999995\n      // which would get truncated to 3599999 after parseInt\n      // which would then be rejected by rightBtc because it's too precise\n      'quantity': parseInt(this.decimalToPrecision(amount * 1e8, ROUND, 0, this.precisionMode)),\n      'limit': parseInt(this.decimalToPrecision(price * 1e8, ROUND, 0, this.precisionMode)),\n      'type': type.toUpperCase(),\n      'side': side.toUpperCase()\n    };\n    const response = await this.traderPostOrder(this.extend(order, params));\n    return this.parseOrder(response);\n  }\n\n  async cancelOrder(id, symbol = undefined, params = {}) {\n    if (symbol === undefined) {\n      throw new ArgumentsRequired(this.id + ' cancelOrder() requires a symbol argument');\n    }\n\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'trading_pair': market['id'],\n      'ids': id\n    };\n    const response = await this.traderDeleteOrderTradingPairIds(this.extend(request, params));\n    return response;\n  }\n\n  parseOrderStatus(status) {\n    const statuses = {\n      'NEW': 'open',\n      'TRADE': 'closed',\n      // TRADE means filled or partially filled orders\n      'CANCEL': 'canceled'\n    };\n    return this.safeString(statuses, status, status);\n  }\n\n  parseOrder(order, market = undefined) {\n    //\n    // fetchOrder / fetchOpenOrders\n    //\n    //     {\n    //         \"id\": 4180528,\n    //         \"quantity\": 20000000,\n    //         \"rest\": 20000000,\n    //         \"limit\": 1000000,\n    //         \"price\": null,\n    //         \"side\": \"BUY\",\n    //         \"created\": 1496005693738\n    //     }\n    //\n    // fetchOrders\n    //\n    //     {\n    //         \"trading_pair\": \"ETPCNY\",\n    //         \"status\": \"TRADE\",\n    //         \"fee\": 0.23,\n    //         \"min_fee\": 10000000,\n    //         \"created_at\": \"2017-05-25T00:12:27.000Z\",\n    //         \"cost\": 1152468000000,\n    //         \"limit\": 3600000000,\n    //         \"id\": 11060,\n    //         \"quantity\": 32013000000,\n    //         \"filled_quantity\": 32013000000\n    //     }\n    //\n    const id = this.safeString(order, 'id');\n    const status = this.parseOrderStatus(this.safeString(order, 'status'));\n    const marketId = this.safeString(order, 'trading_pair');\n    const symbol = this.safeSymbol(marketId, market);\n    let timestamp = this.safeInteger(order, 'created');\n\n    if (timestamp === undefined) {\n      timestamp = this.parse8601(this.safeString(order, 'created_at'));\n    }\n\n    if ('time' in order) {\n      timestamp = order['time'];\n    } else if ('transactTime' in order) {\n      timestamp = order['transactTime'];\n    }\n\n    let price = this.safeNumber2(order, 'limit', 'price');\n\n    if (price !== undefined) {\n      price = price / 1e8;\n    }\n\n    const amount = this.divideSafeNumber(order, 'quantity', 1e8);\n    const filled = this.divideSafeNumber(order, 'filled_quantity', 1e8);\n    const remaining = this.divideSafeNumber(order, 'rest', 1e8);\n    const cost = this.divideSafeNumber(order, 'cost', 1e8); // lines 483-494 should be generalized into a base class method\n\n    const type = 'limit';\n    const side = this.safeStringLower(order, 'side');\n    const feeCost = this.divideSafeNumber(order, 'min_fee', 1e8);\n    let fee = undefined;\n\n    if (feeCost !== undefined) {\n      let feeCurrency = undefined;\n\n      if (market !== undefined) {\n        feeCurrency = market['quote'];\n      }\n\n      fee = {\n        'rate': this.safeNumber(order, 'fee'),\n        'cost': feeCost,\n        'currency': feeCurrency\n      };\n    }\n\n    const trades = undefined;\n    return this.safeOrder({\n      'info': order,\n      'id': id,\n      'clientOrderId': undefined,\n      'timestamp': timestamp,\n      'datetime': this.iso8601(timestamp),\n      'lastTradeTimestamp': undefined,\n      'symbol': symbol,\n      'type': type,\n      'timeInForce': undefined,\n      'postOnly': undefined,\n      'side': side,\n      'price': price,\n      'stopPrice': undefined,\n      'amount': amount,\n      'cost': cost,\n      'filled': filled,\n      'remaining': remaining,\n      'status': status,\n      'fee': fee,\n      'trades': trades,\n      'average': undefined\n    });\n  }\n\n  async fetchOrder(id, symbol = undefined, params = {}) {\n    if (symbol === undefined) {\n      throw new ArgumentsRequired(this.id + ' fetchOrder() requires a symbol argument');\n    }\n\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'trading_pair': market['id'],\n      'ids': id\n    };\n    const response = await this.traderGetOrdersTradingPairIds(this.extend(request, params)); //\n    // let response = {\n    //         \"status\": {\n    //             \"success\": 1,\n    //             \"message\": \"SUC_LIST_AVTICE_ORDERS\"\n    //         },\n    //         \"result\": [\n    //             {\n    //                 \"id\": 4180528,\n    //                 \"quantity\": 20000000,\n    //                 \"rest\": 20000000,\n    //                 \"limit\": 1000000,\n    //                 \"price\": null,\n    //                 \"side\": \"BUY\",\n    //                 \"created\": 1496005693738\n    //             }\n    //         ]\n    //     }\n    //\n\n    const orders = this.parseOrders(response['result'], market);\n    const ordersById = this.indexBy(orders, 'id');\n\n    if (!(id in ordersById)) {\n      throw new OrderNotFound(this.id + ' fetchOrder could not find order ' + id.toString() + ' in open orders.');\n    }\n\n    return ordersById[id];\n  }\n\n  async fetchOpenOrders(symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    if (symbol === undefined) {\n      throw new ArgumentsRequired(this.id + ' fetchOpenOrders() requires a symbol argument');\n    }\n\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'trading_pair': market['id'],\n      'cursor': 0\n    };\n    const response = await this.traderGetOrderpageTradingPairCursor(this.extend(request, params)); //\n    // let response = {\n    //         \"status\": {\n    //             \"success\": 1,\n    //             \"message\": \"SUC_LIST_AVTICE_ORDERS_PAGE\"\n    //         },\n    //         \"result\": {\n    //             \"cursor\": \"0\",\n    //             \"orders\": [\n    //                 {\n    //                     \"id\": 4180528,\n    //                     \"quantity\": 20000000,\n    //                     \"rest\": 20000000,\n    //                     \"limit\": 1000000,\n    //                     \"price\": null,\n    //                     \"side\": \"BUY\",\n    //                     \"created\": 1496005693738\n    //                 }\n    //             ]\n    //         }\n    //     }\n    //\n\n    return this.parseOrders(response['result']['orders'], market, since, limit);\n  }\n\n  async fetchOrders(symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    let ids = this.safeString(params, 'ids');\n\n    if (symbol === undefined || ids === undefined) {\n      throw new ArgumentsRequired(this.id + \" fetchOrders() requires a 'symbol' argument and an extra 'ids' parameter. The 'ids' should be an array or a string of one or more order ids separated with slashes.\"); // eslint-disable-line quotes\n    }\n\n    if (Array.isArray(ids)) {\n      ids = ids.join('/');\n    }\n\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'trading_pair': market['id'],\n      'ids': ids\n    };\n    const response = await this.traderGetHistoryTradingPairIds(this.extend(request, params)); //\n    // let response = {\n    //         \"status\": {\n    //             \"success\": 1,\n    //             \"message\": null\n    //         },\n    //         \"result\": [\n    //             {\n    //                 \"trading_pair\": \"ETPCNY\",\n    //                 \"status\": \"TRADE\",\n    //                 \"fee\": 0.23,\n    //                 \"min_fee\": 10000000,\n    //                 \"created_at\": \"2017-05-25T00:12:27.000Z\",\n    //                 \"cost\": 1152468000000,\n    //                 \"limit\": 3600000000,\n    //                 \"id\": 11060,\n    //                 \"quantity\": 32013000000,\n    //                 \"filled_quantity\": 32013000000\n    //             }\n    //         ]\n    //     }\n    //\n\n    return this.parseOrders(response['result'], undefined, since, limit);\n  }\n\n  async fetchMyTrades(symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    if (symbol === undefined) {\n      throw new ArgumentsRequired(this.id + ' fetchMyTrades() requires a symbol argument');\n    }\n\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'trading_pair': market['id'],\n      'page': 0\n    };\n    const response = await this.traderGetHistorysTradingPairPage(this.extend(request, params)); //\n    // let response = {\n    //         \"status\": {\n    //             \"success\": 1,\n    //             \"message\": null\n    //         },\n    //         \"result\": [\n    //             {\n    //                 \"order_id\": 118735,\n    //                 \"trade_id\": 7,\n    //                 \"trading_pair\": \"BTCCNY\",\n    //                 \"side\": \"B\",\n    //                 \"quantity\": 1000000000,\n    //                 \"price\": 900000000,\n    //                 \"created_at\": \"2017-06-06T20:45:27.000Z\"\n    //             },\n    //             {\n    //                 \"order_id\": 118734,\n    //                 \"trade_id\": 7,\n    //                 \"trading_pair\": \"BTCCNY\",\n    //                 \"side\": \"S\",\n    //                 \"quantity\": 1000000000,\n    //                 \"price\": 900000000,\n    //                 \"created_at\": \"2017-06-06T20:45:27.000Z\"\n    //             }\n    //         ]\n    //     }\n    //\n\n    return this.parseTrades(response['result'], undefined, since, limit);\n  }\n\n  sign(path, api = 'public', method = 'GET', params = {}, headers = undefined, body = undefined) {\n    const query = this.omit(params, this.extractParams(path));\n    let url = this.urls['api'] + '/' + api + '/' + this.implodeParams(path, params);\n\n    if (api === 'public') {\n      if (Object.keys(query).length) {\n        url += '?' + this.urlencode(query);\n      }\n    } else {\n      this.checkRequiredCredentials();\n      headers = {\n        'apikey': this.apiKey,\n        'signature': this.secret\n      };\n\n      if (method === 'GET') {\n        if (Object.keys(query).length) {\n          url += '?' + this.urlencode(query);\n        }\n      } else {\n        body = this.json(query);\n        headers['Content-Type'] = 'application/json';\n      }\n    }\n\n    return {\n      'url': url,\n      'method': method,\n      'body': body,\n      'headers': headers\n    };\n  }\n\n  handleErrors(httpCode, reason, url, method, headers, body, response, requestHeaders, requestBody) {\n    if (response === undefined) {\n      return; // fallback to default error handler\n    }\n\n    const status = this.safeValue(response, 'status');\n\n    if (status !== undefined) {\n      //\n      //     {\"status\":{\"success\":0,\"message\":\"ERR_USERTOKEN_NOT_FOUND\"}}\n      //\n      const success = this.safeString(status, 'success');\n\n      if (success !== '1') {\n        const message = this.safeString(status, 'message');\n        const feedback = this.id + ' ' + body;\n        this.throwExactlyMatchedException(this.exceptions, message, feedback);\n        throw new ExchangeError(feedback);\n      }\n    }\n  }\n\n};","map":{"version":3,"sources":["C:/Users/James Price/Documents/VS Code/bixpro/node_modules/ccxt/js/rightbtc.js"],"names":["Exchange","require","ROUND","ExchangeError","ArgumentsRequired","AuthenticationError","InsufficientFunds","InvalidOrder","OrderNotFound","module","exports","rightbtc","describe","deepExtend","fetchMarkets","params","markets","publicGetTradingPairs","marketIds","Object","keys","result","i","length","id","market","baseId","safeString","quoteId","base","safeCurrencyCode","quote","symbol","amountPrecision","pricePrecision","amountLimit","parsePrecision","priceLimit","precision","parseInt","push","parseNumber","undefined","divideSafeNumber","x","key","divisor","value","safeNumber","parseTicker","ticker","timestamp","safeInteger","last","high","low","bid","ask","baseVolume","iso8601","fetchTicker","loadMarkets","request","response","publicGetTickerTradingPair","extend","safeValue","fetchTickers","symbols","publicGetTickers","tickers","marketsById","filterByArray","fetchOrderBook","limit","marketId","method","bidsasks","types","ti","type","price","amount","total","parseOrderBook","parseTrade","trade","parse8601","orderId","safeSymbol","cost","costToPrecision","parseFloat","side","safeStringLower","fetchTrades","since","publicGetTradesTradingPair","parseTrades","parseOHLCV","ohlcv","fetchOHLCV","timeframe","timeframes","publicGetCandlestickTimeSymbolTradingPair","parseOHLCVs","fetchBalance","traderGetBalances","balances","balance","currencyId","code","account","parseBalance","createOrder","order","decimalToPrecision","precisionMode","toUpperCase","traderPostOrder","parseOrder","cancelOrder","traderDeleteOrderTradingPairIds","parseOrderStatus","status","statuses","safeNumber2","filled","remaining","feeCost","fee","feeCurrency","trades","safeOrder","fetchOrder","traderGetOrdersTradingPairIds","orders","parseOrders","ordersById","indexBy","toString","fetchOpenOrders","traderGetOrderpageTradingPairCursor","fetchOrders","ids","Array","isArray","join","traderGetHistoryTradingPairIds","fetchMyTrades","traderGetHistorysTradingPairPage","sign","path","api","headers","body","query","omit","extractParams","url","urls","implodeParams","urlencode","checkRequiredCredentials","apiKey","secret","json","handleErrors","httpCode","reason","requestHeaders","requestBody","success","message","feedback","throwExactlyMatchedException","exceptions"],"mappings":"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","sourcesContent":["'use strict';\n\nconst Exchange = require ('./base/Exchange');\nconst { ROUND } = require ('./base/functions/number');\nconst { ExchangeError, ArgumentsRequired, AuthenticationError, InsufficientFunds, InvalidOrder, OrderNotFound } = require ('./base/errors');\n\nmodule.exports = class rightbtc extends Exchange {\n    describe () {\n        return this.deepExtend (super.describe (), {\n            'id': 'rightbtc',\n            'name': 'RightBTC',\n            'countries': [ 'AE' ],\n            'has': {\n                'cancelOrder': true,\n                'createOrder': true,\n                'privateAPI': false,\n                'fetchBalance': true,\n                'fetchClosedOrders': false,\n                'fetchMarkets': true,\n                'fetchMyTrades': true,\n                'fetchOHLCV': true,\n                'fetchOpenOrders': true,\n                'fetchOrder': 'emulated',\n                'fetchOrderBook': true,\n                'fetchOrders': true,\n                'fetchTicker': true,\n                'fetchTickers': true,\n                'fetchTrades': true,\n            },\n            'timeframes': {\n                '1m': 'min1',\n                '5m': 'min5',\n                '15m': 'min15',\n                '30m': 'min30',\n                '1h': 'hr1',\n                '1d': 'day1',\n                '1w': 'week',\n            },\n            'urls': {\n                'logo': 'https://user-images.githubusercontent.com/51840849/87182092-1f372700-c2ec-11ea-8f9e-01b4d3ff8941.jpg',\n                'api': 'https://www.rightbtc.com/api',\n                'www': 'https://www.rightbtc.com',\n                'doc': [\n                    'https://docs.rightbtc.com/api/',\n                ],\n                // eslint-disable-next-line no-useless-escape\n                // 'fees': 'https://www.rightbtc.com/\\#\\!/support/fee',\n            },\n            'api': {\n                'public': {\n                    'get': [\n                        // 'getAssetsTradingPairs/zh', // 404\n                        'trading_pairs',\n                        'ticker/{trading_pair}',\n                        'tickers',\n                        'depth/{trading_pair}',\n                        'depth/{trading_pair}/{count}',\n                        'trades/{trading_pair}',\n                        'trades/{trading_pair}/{count}',\n                        'candlestick/latest/{trading_pair}',\n                        'candlestick/{timeSymbol}/{trading_pair}',\n                        'candlestick/{timeSymbol}/{trading_pair}/{count}',\n                    ],\n                },\n                'trader': {\n                    'get': [\n                        'balance/{symbol}',\n                        'balances',\n                        'deposits/{asset}/{page}',\n                        'withdrawals/{asset}/{page}',\n                        'orderpage/{trading_pair}/{cursor}',\n                        'orders/{trading_pair}/{ids}', // ids are a slash-separated list of {id}/{id}/{id}/...\n                        'history/{trading_pair}/{ids}',\n                        'historys/{trading_pair}/{page}',\n                        'trading_pairs',\n                    ],\n                    'post': [\n                        'order',\n                    ],\n                    'delete': [\n                        'order/{trading_pair}/{ids}',\n                    ],\n                },\n            },\n            // HARDCODING IS DEPRECATED, THE FEES BELOW SHOULD BE REWRITTEN\n            'fees': {\n                'trading': {\n                    // min trading fees\n                    // 0.0001 BTC\n                    // 0.01 ETP\n                    // 0.001 ETH\n                    // 0.1 BITCNY\n                    'maker': 0.1 / 100,\n                    'taker': 0.2 / 100,\n                },\n                'funding': {\n                    'withdraw': {\n                        // 'BTM': n => 3 + n * (1 / 100),\n                        // 'ZDC': n => 1 + n * (0.5 / 100),\n                        // 'ZGC': n => 0.5 + n * (0.5 / 100),\n                        // 'BTS': n => 1 + n * (1 / 100),\n                        // 'DLT': n => 3 + n * (1 / 100),\n                        // 'SNT': n => 10 + n * (1 / 100),\n                        // 'XNC': n => 1 + n * (1 / 100),\n                        // 'ICO': n => 3 + n * (1 / 100),\n                        // 'CMC': n => 1 + n * (0.5 / 100),\n                        // 'GXS': n => 0.2 + n * (1 / 100),\n                        // 'OBITS': n => 0.3 + n * (1 / 100),\n                        // 'ICS': n => 2 + n * (1 / 100),\n                        // 'TIC': n => 2 + n * (1 / 100),\n                        // 'IND': n => 20 + n * (1 / 100),\n                        // 'MVC': n => 20 + n * (1 / 100),\n                        // 'BitCNY': n => 0.1 + n * (1 / 100),\n                        // 'MTX': n => 1 + n * (1 / 100),\n                        'ETP': 0.01,\n                        'BTC': 0.0005,\n                        'ETH': 0.005,\n                        'ETC': 0.01,\n                        'STORJ': 3,\n                        'LTC': 0.01,\n                        'ZEC': 0.001,\n                        'BCC': 0.001,\n                        'XRB': 0,\n                        'NXS': 0.1,\n                    },\n                },\n            },\n            'commonCurrencies': {\n                'XRB': 'NANO',\n            },\n            'exceptions': {\n                'ERR_USERTOKEN_NOT_FOUND': AuthenticationError,\n                'ERR_ASSET_NOT_EXISTS': ExchangeError,\n                'ERR_ASSET_NOT_AVAILABLE': ExchangeError,\n                'ERR_BALANCE_NOT_ENOUGH': InsufficientFunds,\n                'ERR_CREATE_ORDER': InvalidOrder,\n                'ERR_CANDLESTICK_DATA': ExchangeError,\n            },\n        });\n    }\n\n    async fetchMarkets (params = {}) {\n        // let zh = await this.publicGetGetAssetsTradingPairsZh ();\n        const markets = await this.publicGetTradingPairs (params);\n        const marketIds = Object.keys (markets);\n        const result = [];\n        for (let i = 0; i < marketIds.length; i++) {\n            const id = marketIds[i];\n            const market = markets[id];\n            const baseId = this.safeString (market, 'bid_asset_symbol');\n            const quoteId = this.safeString (market, 'ask_asset_symbol');\n            const base = this.safeCurrencyCode (baseId);\n            const quote = this.safeCurrencyCode (quoteId);\n            const symbol = base + '/' + quote;\n            const amountPrecision = this.safeString (market, 'bid_asset_decimals');\n            const pricePrecision = this.safeString (market, 'ask_asset_decimals');\n            const amountLimit = this.parsePrecision (amountPrecision);\n            const priceLimit = this.parsePrecision (pricePrecision);\n            const precision = {\n                'amount': parseInt (amountPrecision),\n                'price': parseInt (pricePrecision),\n            };\n            result.push ({\n                'id': id,\n                'symbol': symbol,\n                'base': base,\n                'quote': quote,\n                'baseId': baseId,\n                'quoteId': quoteId,\n                'active': true,\n                'precision': precision,\n                'limits': {\n                    'amount': {\n                        'min': this.parseNumber (amountLimit),\n                        'max': undefined,\n                    },\n                    'price': {\n                        'min': this.parseNumber (priceLimit),\n                        'max': undefined,\n                    },\n                    'cost': {\n                        'min': undefined,\n                        'max': undefined,\n                    },\n                },\n                'info': market,\n            });\n        }\n        return result;\n    }\n\n    divideSafeNumber (x, key, divisor) {\n        const value = this.safeNumber (x, key);\n        if (value !== undefined) {\n            return value / divisor;\n        }\n        return value;\n    }\n\n    parseTicker (ticker, market = undefined) {\n        const symbol = market['symbol'];\n        const timestamp = this.safeInteger (ticker, 'date');\n        const last = this.divideSafeNumber (ticker, 'last', 1e8);\n        const high = this.divideSafeNumber (ticker, 'high', 1e8);\n        const low = this.divideSafeNumber (ticker, 'low', 1e8);\n        const bid = this.divideSafeNumber (ticker, 'buy', 1e8);\n        const ask = this.divideSafeNumber (ticker, 'sell', 1e8);\n        const baseVolume = this.divideSafeNumber (ticker, 'vol24h', 1e8);\n        return {\n            'symbol': symbol,\n            'timestamp': timestamp,\n            'datetime': this.iso8601 (timestamp),\n            'high': high,\n            'low': low,\n            'bid': bid,\n            'bidVolume': undefined,\n            'ask': ask,\n            'askVolume': undefined,\n            'vwap': undefined,\n            'open': undefined,\n            'close': last,\n            'last': last,\n            'previousClose': undefined,\n            'change': undefined,\n            'percentage': undefined,\n            'average': undefined,\n            'baseVolume': baseVolume,\n            'quoteVolume': undefined,\n            'info': ticker,\n        };\n    }\n\n    async fetchTicker (symbol, params = {}) {\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'trading_pair': market['id'],\n        };\n        const response = await this.publicGetTickerTradingPair (this.extend (request, params));\n        const result = this.safeValue (response, 'result');\n        if (result === undefined) {\n            throw new ExchangeError (this.id + ' fetchTicker returned an empty response for symbol ' + symbol);\n        }\n        return this.parseTicker (result, market);\n    }\n\n    async fetchTickers (symbols = undefined, params = {}) {\n        await this.loadMarkets ();\n        const response = await this.publicGetTickers (params);\n        const tickers = response['result'];\n        const result = {};\n        for (let i = 0; i < tickers.length; i++) {\n            const ticker = tickers[i];\n            const id = ticker['market'];\n            if (!(id in this.marketsById)) {\n                continue;\n            }\n            const market = this.marketsById[id];\n            const symbol = market['symbol'];\n            result[symbol] = this.parseTicker (ticker, market);\n        }\n        return this.filterByArray (result, 'symbol', symbols);\n    }\n\n    async fetchOrderBook (symbol, limit = undefined, params = {}) {\n        await this.loadMarkets ();\n        const request = {\n            'trading_pair': this.marketId (symbol),\n        };\n        let method = 'publicGetDepthTradingPair';\n        if (limit !== undefined) {\n            method += 'Count';\n            request['count'] = limit;\n        }\n        const response = await this[method] (this.extend (request, params));\n        const bidsasks = {};\n        const types = ['bid', 'ask'];\n        for (let ti = 0; ti < types.length; ti++) {\n            const type = types[ti];\n            bidsasks[type] = [];\n            for (let i = 0; i < response['result'][type].length; i++) {\n                const [ price, amount, total ] = response['result'][type][i];\n                bidsasks[type].push ([\n                    price / 1e8,\n                    amount / 1e8,\n                    total / 1e8,\n                ]);\n            }\n        }\n        return this.parseOrderBook (bidsasks, symbol, undefined, 'bid', 'ask');\n    }\n\n    parseTrade (trade, market = undefined) {\n        //\n        //     {\n        //         \"order_id\": 118735,\n        //         \"trade_id\": 7,\n        //         \"trading_pair\": \"BTCCNY\",\n        //         \"side\": \"B\",\n        //         \"quantity\": 1000000000,\n        //         \"price\": 900000000,\n        //         \"created_at\": \"2017-06-06T20:45:27.000Z\"\n        //     }\n        //\n        let timestamp = this.safeInteger (trade, 'date');\n        if (timestamp === undefined) {\n            timestamp = this.parse8601 (this.safeString (trade, 'created_at'));\n        }\n        let id = this.safeString (trade, 'tid');\n        id = this.safeString (trade, 'trade_id', id);\n        const orderId = this.safeString (trade, 'order_id');\n        const price = this.divideSafeNumber (trade, 'price', 1e8);\n        let amount = this.safeNumber (trade, 'amount');\n        amount = this.safeNumber (trade, 'quantity', amount);\n        if (amount !== undefined) {\n            amount = amount / 1e8;\n        }\n        const marketId = this.safeString (trade, 'trading_pair');\n        const symbol = this.safeSymbol (marketId, market);\n        let cost = this.costToPrecision (symbol, price * amount);\n        cost = parseFloat (cost);\n        let side = this.safeStringLower (trade, 'side');\n        if (side === 'b') {\n            side = 'buy';\n        } else if (side === 's') {\n            side = 'sell';\n        }\n        return {\n            'id': id,\n            'info': trade,\n            'timestamp': timestamp,\n            'datetime': this.iso8601 (timestamp),\n            'symbol': symbol,\n            'order': orderId,\n            'type': 'limit',\n            'side': side,\n            'takerOrMaker': undefined,\n            'price': price,\n            'amount': amount,\n            'cost': cost,\n            'fee': undefined,\n        };\n    }\n\n    async fetchTrades (symbol, since = undefined, limit = undefined, params = {}) {\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'trading_pair': market['id'],\n        };\n        const response = await this.publicGetTradesTradingPair (this.extend (request, params));\n        return this.parseTrades (response['result'], market, since, limit);\n    }\n\n    parseOHLCV (ohlcv, market = undefined) {\n        return [\n            this.safeInteger (ohlcv, 0),\n            parseFloat (ohlcv[2]) / 1e8,\n            parseFloat (ohlcv[3]) / 1e8,\n            parseFloat (ohlcv[4]) / 1e8,\n            parseFloat (ohlcv[5]) / 1e8,\n            parseFloat (ohlcv[1]) / 1e8,\n        ];\n    }\n\n    async fetchOHLCV (symbol, timeframe = '5m', since = undefined, limit = undefined, params = {}) {\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'trading_pair': market['id'],\n            'timeSymbol': this.timeframes[timeframe],\n        };\n        const response = await this.publicGetCandlestickTimeSymbolTradingPair (this.extend (request, params));\n        const result = this.safeValue (response, 'result', []);\n        return this.parseOHLCVs (result, market, timeframe, since, limit);\n    }\n\n    async fetchBalance (params = {}) {\n        await this.loadMarkets ();\n        const response = await this.traderGetBalances (params);\n        //\n        //     {\n        //         \"status\": {\n        //             \"success\": 1,\n        //             \"message\": \"GET_BALANCES\"\n        //         },\n        //         \"result\": [\n        //             {\n        //                 \"asset\": \"ETP\",\n        //                 \"balance\": \"5000000000000\",\n        //                 \"frozen\": \"0\",\n        //                 \"state\": \"1\"\n        //             },\n        //             {\n        //                 \"asset\": \"CNY\",\n        //                 \"balance\": \"10000000000000\",\n        //                 \"frozen\": \"240790000\",\n        //                 \"state\": \"1\"\n        //             }\n        //         ]\n        //     }\n        //\n        const result = { 'info': response };\n        const balances = this.safeValue (response, 'result', []);\n        for (let i = 0; i < balances.length; i++) {\n            const balance = balances[i];\n            const currencyId = this.safeString (balance, 'asset');\n            const code = this.safeCurrencyCode (currencyId);\n            const account = this.account ();\n            // https://github.com/ccxt/ccxt/issues/3873\n            account['free'] = this.divideSafeNumber (balance, 'balance', 1e8);\n            account['used'] = this.divideSafeNumber (balance, 'frozen', 1e8);\n            result[code] = account;\n        }\n        return this.parseBalance (result);\n    }\n\n    async createOrder (symbol, type, side, amount, price = undefined, params = {}) {\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const order = {\n            'trading_pair': market['id'],\n            // We need to use decimalToPrecision here, since\n            //   0.036*1e8 === 3599999.9999999995\n            // which would get truncated to 3599999 after parseInt\n            // which would then be rejected by rightBtc because it's too precise\n            'quantity': parseInt (this.decimalToPrecision (amount * 1e8, ROUND, 0, this.precisionMode)),\n            'limit': parseInt (this.decimalToPrecision (price * 1e8, ROUND, 0, this.precisionMode)),\n            'type': type.toUpperCase (),\n            'side': side.toUpperCase (),\n        };\n        const response = await this.traderPostOrder (this.extend (order, params));\n        return this.parseOrder (response);\n    }\n\n    async cancelOrder (id, symbol = undefined, params = {}) {\n        if (symbol === undefined) {\n            throw new ArgumentsRequired (this.id + ' cancelOrder() requires a symbol argument');\n        }\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'trading_pair': market['id'],\n            'ids': id,\n        };\n        const response = await this.traderDeleteOrderTradingPairIds (this.extend (request, params));\n        return response;\n    }\n\n    parseOrderStatus (status) {\n        const statuses = {\n            'NEW': 'open',\n            'TRADE': 'closed', // TRADE means filled or partially filled orders\n            'CANCEL': 'canceled',\n        };\n        return this.safeString (statuses, status, status);\n    }\n\n    parseOrder (order, market = undefined) {\n        //\n        // fetchOrder / fetchOpenOrders\n        //\n        //     {\n        //         \"id\": 4180528,\n        //         \"quantity\": 20000000,\n        //         \"rest\": 20000000,\n        //         \"limit\": 1000000,\n        //         \"price\": null,\n        //         \"side\": \"BUY\",\n        //         \"created\": 1496005693738\n        //     }\n        //\n        // fetchOrders\n        //\n        //     {\n        //         \"trading_pair\": \"ETPCNY\",\n        //         \"status\": \"TRADE\",\n        //         \"fee\": 0.23,\n        //         \"min_fee\": 10000000,\n        //         \"created_at\": \"2017-05-25T00:12:27.000Z\",\n        //         \"cost\": 1152468000000,\n        //         \"limit\": 3600000000,\n        //         \"id\": 11060,\n        //         \"quantity\": 32013000000,\n        //         \"filled_quantity\": 32013000000\n        //     }\n        //\n        const id = this.safeString (order, 'id');\n        const status = this.parseOrderStatus (this.safeString (order, 'status'));\n        const marketId = this.safeString (order, 'trading_pair');\n        const symbol = this.safeSymbol (marketId, market);\n        let timestamp = this.safeInteger (order, 'created');\n        if (timestamp === undefined) {\n            timestamp = this.parse8601 (this.safeString (order, 'created_at'));\n        }\n        if ('time' in order) {\n            timestamp = order['time'];\n        } else if ('transactTime' in order) {\n            timestamp = order['transactTime'];\n        }\n        let price = this.safeNumber2 (order, 'limit', 'price');\n        if (price !== undefined) {\n            price = price / 1e8;\n        }\n        const amount = this.divideSafeNumber (order, 'quantity', 1e8);\n        const filled = this.divideSafeNumber (order, 'filled_quantity', 1e8);\n        const remaining = this.divideSafeNumber (order, 'rest', 1e8);\n        const cost = this.divideSafeNumber (order, 'cost', 1e8);\n        // lines 483-494 should be generalized into a base class method\n        const type = 'limit';\n        const side = this.safeStringLower (order, 'side');\n        const feeCost = this.divideSafeNumber (order, 'min_fee', 1e8);\n        let fee = undefined;\n        if (feeCost !== undefined) {\n            let feeCurrency = undefined;\n            if (market !== undefined) {\n                feeCurrency = market['quote'];\n            }\n            fee = {\n                'rate': this.safeNumber (order, 'fee'),\n                'cost': feeCost,\n                'currency': feeCurrency,\n            };\n        }\n        const trades = undefined;\n        return this.safeOrder ({\n            'info': order,\n            'id': id,\n            'clientOrderId': undefined,\n            'timestamp': timestamp,\n            'datetime': this.iso8601 (timestamp),\n            'lastTradeTimestamp': undefined,\n            'symbol': symbol,\n            'type': type,\n            'timeInForce': undefined,\n            'postOnly': undefined,\n            'side': side,\n            'price': price,\n            'stopPrice': undefined,\n            'amount': amount,\n            'cost': cost,\n            'filled': filled,\n            'remaining': remaining,\n            'status': status,\n            'fee': fee,\n            'trades': trades,\n            'average': undefined,\n        });\n    }\n\n    async fetchOrder (id, symbol = undefined, params = {}) {\n        if (symbol === undefined) {\n            throw new ArgumentsRequired (this.id + ' fetchOrder() requires a symbol argument');\n        }\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'trading_pair': market['id'],\n            'ids': id,\n        };\n        const response = await this.traderGetOrdersTradingPairIds (this.extend (request, params));\n        //\n        // let response = {\n        //         \"status\": {\n        //             \"success\": 1,\n        //             \"message\": \"SUC_LIST_AVTICE_ORDERS\"\n        //         },\n        //         \"result\": [\n        //             {\n        //                 \"id\": 4180528,\n        //                 \"quantity\": 20000000,\n        //                 \"rest\": 20000000,\n        //                 \"limit\": 1000000,\n        //                 \"price\": null,\n        //                 \"side\": \"BUY\",\n        //                 \"created\": 1496005693738\n        //             }\n        //         ]\n        //     }\n        //\n        const orders = this.parseOrders (response['result'], market);\n        const ordersById = this.indexBy (orders, 'id');\n        if (!(id in ordersById)) {\n            throw new OrderNotFound (this.id + ' fetchOrder could not find order ' + id.toString () + ' in open orders.');\n        }\n        return ordersById[id];\n    }\n\n    async fetchOpenOrders (symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        if (symbol === undefined) {\n            throw new ArgumentsRequired (this.id + ' fetchOpenOrders() requires a symbol argument');\n        }\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'trading_pair': market['id'],\n            'cursor': 0,\n        };\n        const response = await this.traderGetOrderpageTradingPairCursor (this.extend (request, params));\n        //\n        // let response = {\n        //         \"status\": {\n        //             \"success\": 1,\n        //             \"message\": \"SUC_LIST_AVTICE_ORDERS_PAGE\"\n        //         },\n        //         \"result\": {\n        //             \"cursor\": \"0\",\n        //             \"orders\": [\n        //                 {\n        //                     \"id\": 4180528,\n        //                     \"quantity\": 20000000,\n        //                     \"rest\": 20000000,\n        //                     \"limit\": 1000000,\n        //                     \"price\": null,\n        //                     \"side\": \"BUY\",\n        //                     \"created\": 1496005693738\n        //                 }\n        //             ]\n        //         }\n        //     }\n        //\n        return this.parseOrders (response['result']['orders'], market, since, limit);\n    }\n\n    async fetchOrders (symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        let ids = this.safeString (params, 'ids');\n        if ((symbol === undefined) || (ids === undefined)) {\n            throw new ArgumentsRequired (this.id + \" fetchOrders() requires a 'symbol' argument and an extra 'ids' parameter. The 'ids' should be an array or a string of one or more order ids separated with slashes.\"); // eslint-disable-line quotes\n        }\n        if (Array.isArray (ids)) {\n            ids = ids.join ('/');\n        }\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'trading_pair': market['id'],\n            'ids': ids,\n        };\n        const response = await this.traderGetHistoryTradingPairIds (this.extend (request, params));\n        //\n        // let response = {\n        //         \"status\": {\n        //             \"success\": 1,\n        //             \"message\": null\n        //         },\n        //         \"result\": [\n        //             {\n        //                 \"trading_pair\": \"ETPCNY\",\n        //                 \"status\": \"TRADE\",\n        //                 \"fee\": 0.23,\n        //                 \"min_fee\": 10000000,\n        //                 \"created_at\": \"2017-05-25T00:12:27.000Z\",\n        //                 \"cost\": 1152468000000,\n        //                 \"limit\": 3600000000,\n        //                 \"id\": 11060,\n        //                 \"quantity\": 32013000000,\n        //                 \"filled_quantity\": 32013000000\n        //             }\n        //         ]\n        //     }\n        //\n        return this.parseOrders (response['result'], undefined, since, limit);\n    }\n\n    async fetchMyTrades (symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        if (symbol === undefined) {\n            throw new ArgumentsRequired (this.id + ' fetchMyTrades() requires a symbol argument');\n        }\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'trading_pair': market['id'],\n            'page': 0,\n        };\n        const response = await this.traderGetHistorysTradingPairPage (this.extend (request, params));\n        //\n        // let response = {\n        //         \"status\": {\n        //             \"success\": 1,\n        //             \"message\": null\n        //         },\n        //         \"result\": [\n        //             {\n        //                 \"order_id\": 118735,\n        //                 \"trade_id\": 7,\n        //                 \"trading_pair\": \"BTCCNY\",\n        //                 \"side\": \"B\",\n        //                 \"quantity\": 1000000000,\n        //                 \"price\": 900000000,\n        //                 \"created_at\": \"2017-06-06T20:45:27.000Z\"\n        //             },\n        //             {\n        //                 \"order_id\": 118734,\n        //                 \"trade_id\": 7,\n        //                 \"trading_pair\": \"BTCCNY\",\n        //                 \"side\": \"S\",\n        //                 \"quantity\": 1000000000,\n        //                 \"price\": 900000000,\n        //                 \"created_at\": \"2017-06-06T20:45:27.000Z\"\n        //             }\n        //         ]\n        //     }\n        //\n        return this.parseTrades (response['result'], undefined, since, limit);\n    }\n\n    sign (path, api = 'public', method = 'GET', params = {}, headers = undefined, body = undefined) {\n        const query = this.omit (params, this.extractParams (path));\n        let url = this.urls['api'] + '/' + api + '/' + this.implodeParams (path, params);\n        if (api === 'public') {\n            if (Object.keys (query).length) {\n                url += '?' + this.urlencode (query);\n            }\n        } else {\n            this.checkRequiredCredentials ();\n            headers = {\n                'apikey': this.apiKey,\n                'signature': this.secret,\n            };\n            if (method === 'GET') {\n                if (Object.keys (query).length) {\n                    url += '?' + this.urlencode (query);\n                }\n            } else {\n                body = this.json (query);\n                headers['Content-Type'] = 'application/json';\n            }\n        }\n        return { 'url': url, 'method': method, 'body': body, 'headers': headers };\n    }\n\n    handleErrors (httpCode, reason, url, method, headers, body, response, requestHeaders, requestBody) {\n        if (response === undefined) {\n            return; // fallback to default error handler\n        }\n        const status = this.safeValue (response, 'status');\n        if (status !== undefined) {\n            //\n            //     {\"status\":{\"success\":0,\"message\":\"ERR_USERTOKEN_NOT_FOUND\"}}\n            //\n            const success = this.safeString (status, 'success');\n            if (success !== '1') {\n                const message = this.safeString (status, 'message');\n                const feedback = this.id + ' ' + body;\n                this.throwExactlyMatchedException (this.exceptions, message, feedback);\n                throw new ExchangeError (feedback);\n            }\n        }\n    }\n};\n"]},"metadata":{},"sourceType":"script"}