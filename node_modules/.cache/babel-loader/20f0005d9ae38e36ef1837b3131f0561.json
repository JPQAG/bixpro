{"ast":null,"code":"'use strict'; //  ---------------------------------------------------------------------------\n\nconst Exchange = require('./base/Exchange');\n\nconst {\n  ExchangeError,\n  ArgumentsRequired,\n  InvalidNonce,\n  OrderNotFound,\n  InvalidOrder,\n  DDoSProtection,\n  BadRequest,\n  AuthenticationError\n} = require('./base/errors');\n\nconst Precise = require('./base/Precise'); //  ---------------------------------------------------------------------------\n\n\nmodule.exports = class latoken extends Exchange {\n  describe() {\n    return this.deepExtend(super.describe(), {\n      'id': 'latoken',\n      'name': 'Latoken',\n      'countries': ['KY'],\n      // Cayman Islands\n      'version': 'v1',\n      'rateLimit': 2000,\n      'certified': false,\n      'userAgent': this.userAgents['chrome'],\n      'has': {\n        'CORS': false,\n        'publicAPI': true,\n        'privateAPI': true,\n        'cancelOrder': true,\n        'cancelAllOrders': true,\n        'createMarketOrder': false,\n        'createOrder': true,\n        'fetchBalance': true,\n        'fetchCanceledOrders': true,\n        'fetchClosedOrders': true,\n        'fetchCurrencies': true,\n        'fetchMyTrades': true,\n        'fetchOpenOrders': true,\n        'fetchOrder': false,\n        'fetchOrdersByStatus': true,\n        'fetchOrderBook': true,\n        'fetchTicker': true,\n        'fetchTickers': true,\n        'fetchTime': true,\n        'fetchTrades': true\n      },\n      'urls': {\n        'logo': 'https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg',\n        'api': 'https://api.latoken.com',\n        'www': 'https://latoken.com',\n        'doc': ['https://api.latoken.com']\n      },\n      'api': {\n        'public': {\n          'get': ['ExchangeInfo/time', 'ExchangeInfo/limits', 'ExchangeInfo/pairs', 'ExchangeInfo/pairs/{currency}', 'ExchangeInfo/pair', 'ExchangeInfo/currencies', 'ExchangeInfo/currencies/{symbol}', 'MarketData/tickers', 'MarketData/ticker/{symbol}', 'MarketData/orderBook/{symbol}', 'MarketData/orderBook/{symbol}/{limit}', 'MarketData/trades/{symbol}', 'MarketData/trades/{symbol}/{limit}']\n        },\n        'private': {\n          'get': ['Account/balances', 'Account/balances/{currency}', 'Order/status', 'Order/active', 'Order/get_order', 'Order/trades'],\n          'post': ['Order/new', 'Order/test-order', 'Order/cancel', 'Order/cancel_all']\n        }\n      },\n      'fees': {\n        'trading': {\n          'feeSide': 'get',\n          'tierBased': false,\n          'percentage': true,\n          'maker': 0.1 / 100,\n          'taker': 0.1 / 100\n        }\n      },\n      'commonCurrencies': {\n        'MT': 'Monarch',\n        'TSL': 'Treasure SL'\n      },\n      'options': {\n        'createOrderMethod': 'private_post_order_new' // private_post_order_test_order\n\n      },\n      'exceptions': {\n        'exact': {\n          'Signature or ApiKey is not valid': AuthenticationError,\n          'Request is out of time': InvalidNonce,\n          'Symbol must be specified': BadRequest\n        },\n        'broad': {\n          'Request limit reached': DDoSProtection,\n          'Pair': BadRequest,\n          'Price needs to be greater than': InvalidOrder,\n          'Amount needs to be greater than': InvalidOrder,\n          'The Symbol field is required': InvalidOrder,\n          'OrderType is not valid': InvalidOrder,\n          'Side is not valid': InvalidOrder,\n          'Cancelable order whit': OrderNotFound,\n          'Order': OrderNotFound\n        }\n      }\n    });\n  }\n\n  nonce() {\n    return this.milliseconds();\n  }\n\n  async fetchTime(params = {}) {\n    const response = await this.publicGetExchangeInfoTime(params); //\n    //     {\n    //         \"time\": \"2019-04-18T9:00:00.0Z\",\n    //         \"unixTimeSeconds\": 1555578000,\n    //         \"unixTimeMiliseconds\": 1555578000000\n    //     }\n    //\n\n    return this.safeInteger(response, 'unixTimeMiliseconds');\n  }\n\n  async fetchMarkets(params = {}) {\n    const response = await this.publicGetExchangeInfoPairs(params); //\n    //     [\n    //         {\n    //             \"pairId\": 502,\n    //             \"symbol\": \"LAETH\",\n    //             \"baseCurrency\": \"LA\",\n    //             \"quotedCurrency\": \"ETH\",\n    //             \"makerFee\": 0.01,\n    //             \"takerFee\": 0.01,\n    //             \"pricePrecision\": 8,\n    //             \"amountPrecision\": 8,\n    //             \"minQty\": 0.1\n    //         }\n    //     ]\n    //\n\n    const result = [];\n\n    for (let i = 0; i < response.length; i++) {\n      const market = response[i];\n      const id = this.safeString(market, 'symbol'); // the exchange shows them inverted\n\n      const baseId = this.safeString(market, 'baseCurrency');\n      const quoteId = this.safeString(market, 'quotedCurrency');\n      const numericId = this.safeInteger(market, 'pairId');\n      const base = this.safeCurrencyCode(baseId);\n      const quote = this.safeCurrencyCode(quoteId);\n      const symbol = base + '/' + quote;\n      const pricePrecisionString = this.safeString(market, 'pricePrecision');\n      const priceLimit = this.parsePrecision(pricePrecisionString);\n      const precision = {\n        'price': parseInt(pricePrecisionString),\n        'amount': this.safeInteger(market, 'amountPrecision')\n      };\n      const limits = {\n        'amount': {\n          'min': this.safeNumber(market, 'minQty'),\n          'max': undefined\n        },\n        'price': {\n          'min': this.parseNumber(priceLimit),\n          'max': undefined\n        },\n        'cost': {\n          'min': undefined,\n          'max': undefined\n        }\n      };\n      result.push({\n        'id': id,\n        'numericId': numericId,\n        'info': market,\n        'symbol': symbol,\n        'base': base,\n        'quote': quote,\n        'baseId': baseId,\n        'quoteId': quoteId,\n        'active': undefined,\n        // assuming true\n        'precision': precision,\n        'limits': limits\n      });\n    }\n\n    return result;\n  }\n\n  async fetchCurrencies(params = {}) {\n    const response = await this.publicGetExchangeInfoCurrencies(params); //\n    //     [\n    //         {\n    //             \"currencyId\": 102,\n    //             \"symbol\": \"LA\",\n    //             \"name\": \"Latoken\",\n    //             \"precission\": 8,\n    //             \"type\": \"ERC20\",\n    //             \"fee\": 0.1\n    //         }\n    //     ]\n    //\n\n    const result = {};\n\n    for (let i = 0; i < response.length; i++) {\n      const currency = response[i];\n      const id = this.safeString(currency, 'symbol');\n      const numericId = this.safeInteger(currency, 'currencyId');\n      const code = this.safeCurrencyCode(id);\n      const precision = this.safeInteger(currency, 'precission');\n      const fee = this.safeNumber(currency, 'fee');\n      const active = undefined;\n      result[code] = {\n        'id': id,\n        'numericId': numericId,\n        'code': code,\n        'info': currency,\n        'name': code,\n        'active': active,\n        'fee': fee,\n        'precision': precision,\n        'limits': {\n          'amount': {\n            'min': undefined,\n            'max': undefined\n          },\n          'withdraw': {\n            'min': undefined,\n            'max': undefined\n          }\n        }\n      };\n    }\n\n    return result;\n  }\n\n  async fetchBalance(params = {}) {\n    await this.loadMarkets();\n    const response = await this.privateGetAccountBalances(params); //\n    //     [\n    //         {\n    //             \"currencyId\": 102,\n    //             \"symbol\": \"LA\",\n    //             \"name\": \"Latoken\",\n    //             \"amount\": 1054.66,\n    //             \"available\": 900.66,\n    //             \"frozen\": 154,\n    //             \"pending\": 0\n    //         }\n    //     ]\n    //\n\n    const result = {\n      'info': response,\n      'timestamp': undefined,\n      'datetime': undefined\n    };\n\n    for (let i = 0; i < response.length; i++) {\n      const balance = response[i];\n      const currencyId = this.safeString(balance, 'symbol');\n      const code = this.safeCurrencyCode(currencyId);\n      const frozen = this.safeString(balance, 'frozen');\n      const pending = this.safeString(balance, 'pending');\n      const account = this.account();\n      account['used'] = Precise.stringAdd(frozen, pending);\n      account['free'] = this.safeString(balance, 'available');\n      account['total'] = this.safeString(balance, 'amount');\n      result[code] = account;\n    }\n\n    return this.parseBalance(result, false);\n  }\n\n  async fetchOrderBook(symbol, limit = undefined, params = {}) {\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'symbol': market['id'],\n      'limit': 10\n    };\n\n    if (limit !== undefined) {\n      request['limit'] = limit; // default 10, max 100\n    }\n\n    const response = await this.publicGetMarketDataOrderBookSymbolLimit(this.extend(request, params)); //\n    //     {\n    //         \"pairId\": 502,\n    //         \"symbol\": \"LAETH\",\n    //         \"spread\": 0.07,\n    //         \"asks\": [\n    //             { \"price\": 136.3, \"quantity\": 7.024 }\n    //         ],\n    //         \"bids\": [\n    //             { \"price\": 136.2, \"quantity\": 6.554 }\n    //         ]\n    //     }\n    //\n\n    return this.parseOrderBook(response, symbol, undefined, 'bids', 'asks', 'price', 'quantity');\n  }\n\n  parseTicker(ticker, market = undefined) {\n    //\n    //     {\n    //         \"pairId\":\"63b41092-f3f6-4ea4-9e7c-4525ed250dad\",\n    //         \"symbol\":\"ETHBTC\",\n    //         \"volume\":11317.037494474000000000,\n    //         \"open\":0.020033000000000000,\n    //         \"low\":0.019791000000000000,\n    //         \"high\":0.020375000000000000,\n    //         \"close\":0.019923000000000000,\n    //         \"priceChange\":-0.1500\n    //     }\n    //\n    const marketId = this.safeString(ticker, 'symbol');\n    const symbol = this.safeSymbol(marketId, market);\n    const open = this.safeNumber(ticker, 'open');\n    const close = this.safeNumber(ticker, 'close');\n    let change = undefined;\n\n    if (open !== undefined && close !== undefined) {\n      change = close - open;\n    }\n\n    const percentage = this.safeNumber(ticker, 'priceChange');\n    const timestamp = this.nonce();\n    return {\n      'symbol': symbol,\n      'timestamp': timestamp,\n      'datetime': this.iso8601(timestamp),\n      'low': this.safeNumber(ticker, 'low'),\n      'high': this.safeNumber(ticker, 'high'),\n      'bid': undefined,\n      'bidVolume': undefined,\n      'ask': undefined,\n      'askVolume': undefined,\n      'vwap': undefined,\n      'open': open,\n      'close': close,\n      'last': close,\n      'previousClose': undefined,\n      'change': change,\n      'percentage': percentage,\n      'average': undefined,\n      'baseVolume': undefined,\n      'quoteVolume': this.safeNumber(ticker, 'volume'),\n      'info': ticker\n    };\n  }\n\n  async fetchTicker(symbol, params = {}) {\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'symbol': market['id']\n    };\n    const response = await this.publicGetMarketDataTickerSymbol(this.extend(request, params)); //\n    //     {\n    //         \"pairId\": 502,\n    //         \"symbol\": \"LAETH\",\n    //         \"volume\": 1023314.3202,\n    //         \"open\": 134.82,\n    //         \"low\": 133.95,\n    //         \"high\": 136.22,\n    //         \"close\": 135.12,\n    //         \"priceChange\": 0.22\n    //     }\n    //\n\n    return this.parseTicker(response, market);\n  }\n\n  async fetchTickers(symbols = undefined, params = {}) {\n    await this.loadMarkets();\n    const response = await this.publicGetMarketDataTickers(params); //\n    //     [\n    //         {\n    //             \"pairId\": 502,\n    //             \"symbol\": \"LAETH\",\n    //             \"volume\": 1023314.3202,\n    //             \"open\": 134.82,\n    //             \"low\": 133.95,\n    //             \"high\": 136.22,\n    //             \"close\": 135.12,\n    //             \"priceChange\": 0.22\n    //         }\n    //     ]\n    //\n\n    const result = {};\n\n    for (let i = 0; i < response.length; i++) {\n      const ticker = this.parseTicker(response[i]);\n      const symbol = ticker['symbol'];\n      result[symbol] = ticker;\n    }\n\n    return this.filterByArray(result, 'symbol', symbols);\n  }\n\n  parseTrade(trade, market = undefined) {\n    //\n    // fetchTrades (public)\n    //\n    //     {\n    //         side: 'buy',\n    //         price: 0.33634,\n    //         amount: 0.01,\n    //         timestamp: 1564240008000 // milliseconds\n    //     }\n    //\n    // fetchMyTrades (private)\n    //\n    //     {\n    //         id: '1564223032.892829.3.tg15',\n    //         orderId: '1564223032.671436.707548@1379:1',\n    //         commission: 0,\n    //         side: 'buy',\n    //         price: 0.32874,\n    //         amount: 0.607,\n    //         timestamp: 1564223033 // seconds\n    //     }\n    //\n    const type = undefined;\n    let timestamp = this.safeInteger2(trade, 'timestamp', 'time');\n\n    if (timestamp !== undefined) {\n      // 03 Jan 2009 - first block\n      if (timestamp < 1230940800000) {\n        timestamp *= 1000;\n      }\n    }\n\n    const priceString = this.safeString(trade, 'price');\n    const amountString = this.safeString(trade, 'amount');\n    const price = this.parseNumber(priceString);\n    const amount = this.parseNumber(amountString);\n    const cost = this.parseNumber(Precise.stringMul(priceString, amountString));\n    const side = this.safeString(trade, 'side');\n    let symbol = undefined;\n\n    if (market !== undefined) {\n      symbol = market['symbol'];\n    }\n\n    const id = this.safeString(trade, 'id');\n    const orderId = this.safeString(trade, 'orderId');\n    const feeCost = this.safeNumber(trade, 'commission');\n    let fee = undefined;\n\n    if (feeCost !== undefined) {\n      fee = {\n        'cost': feeCost,\n        'currency': undefined\n      };\n    }\n\n    return {\n      'info': trade,\n      'timestamp': timestamp,\n      'datetime': this.iso8601(timestamp),\n      'symbol': symbol,\n      'id': id,\n      'order': orderId,\n      'type': type,\n      'takerOrMaker': undefined,\n      'side': side,\n      'price': price,\n      'amount': amount,\n      'cost': cost,\n      'fee': fee\n    };\n  }\n\n  async fetchTrades(symbol, since = undefined, limit = undefined, params = {}) {\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'symbol': market['id']\n    };\n\n    if (limit !== undefined) {\n      request['limit'] = limit; // default 50, max 100\n    }\n\n    const response = await this.publicGetMarketDataTradesSymbol(this.extend(request, params)); //\n    //     {\n    //         \"pairId\":370,\n    //         \"symbol\":\"ETHBTC\",\n    //         \"tradeCount\":51,\n    //         \"trades\": [\n    //             {\n    //                 side: 'buy',\n    //                 price: 0.33634,\n    //                 amount: 0.01,\n    //                 timestamp: 1564240008000 // milliseconds\n    //             }\n    //         ]\n    //     }\n    //\n\n    const trades = this.safeValue(response, 'trades', []);\n    return this.parseTrades(trades, market, since, limit);\n  }\n\n  async fetchMyTrades(symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    if (symbol === undefined) {\n      throw new ArgumentsRequired(this.id + ' fetchMyTrades() requires a symbol argument');\n    }\n\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'symbol': market['id']\n    };\n    const response = await this.privateGetOrderTrades(this.extend(request, params)); //\n    //     {\n    //         \"pairId\": 502,\n    //         \"symbol\": \"LAETH\",\n    //         \"tradeCount\": 1,\n    //         \"trades\": [\n    //             {\n    //                 id: '1564223032.892829.3.tg15',\n    //                 orderId: '1564223032.671436.707548@1379:1',\n    //                 commission: 0,\n    //                 side: 'buy',\n    //                 price: 0.32874,\n    //                 amount: 0.607,\n    //                 timestamp: 1564223033 // seconds\n    //             }\n    //         ]\n    //     }\n    //\n\n    const trades = this.safeValue(response, 'trades', []);\n    return this.parseTrades(trades, market, since, limit);\n  }\n\n  parseOrderStatus(status) {\n    const statuses = {\n      'active': 'open',\n      'partiallyFilled': 'open',\n      'filled': 'closed',\n      'cancelled': 'canceled'\n    };\n    return this.safeString(statuses, status, status);\n  }\n\n  parseOrder(order, market = undefined) {\n    //\n    // createOrder\n    //\n    //     {\n    //         \"orderId\":\"1563460093.134037.704945@0370:2\",\n    //         \"cliOrdId\":\"\",\n    //         \"pairId\":370,\n    //         \"symbol\":\"ETHBTC\",\n    //         \"side\":\"sell\",\n    //         \"orderType\":\"limit\",\n    //         \"price\":1.0,\n    //         \"amount\":1.0\n    //     }\n    //\n    // cancelOrder, fetchOrder, fetchOpenOrders, fetchClosedOrders, fetchCanceledOrders\n    //\n    //     {\n    //         \"orderId\": \"1555492358.126073.126767@0502:2\",\n    //         \"cliOrdId\": \"myNewOrder\",\n    //         \"pairId\": 502,\n    //         \"symbol\": \"LAETH\",\n    //         \"side\": \"buy\",\n    //         \"orderType\": \"limit\",\n    //         \"price\": 136.2,\n    //         \"amount\": 0.57,\n    //         \"orderStatus\": \"partiallyFilled\",\n    //         \"executedAmount\": 0.27,\n    //         \"reaminingAmount\": 0.3,\n    //         \"timeCreated\": 155551580736,\n    //         \"timeFilled\": 0\n    //     }\n    //\n    const id = this.safeString(order, 'orderId');\n    const timestamp = this.safeTimestamp(order, 'timeCreated');\n    const marketId = this.safeString(order, 'symbol');\n    const symbol = this.safeSymbol(marketId, market);\n    const side = this.safeString(order, 'side');\n    const type = this.safeString(order, 'orderType');\n    const price = this.safeNumber(order, 'price');\n    const amount = this.safeNumber(order, 'amount');\n    const filled = this.safeNumber(order, 'executedAmount');\n    const status = this.parseOrderStatus(this.safeString(order, 'orderStatus'));\n    const timeFilled = this.safeTimestamp(order, 'timeFilled');\n    let lastTradeTimestamp = undefined;\n\n    if (timeFilled !== undefined && timeFilled > 0) {\n      lastTradeTimestamp = timeFilled;\n    }\n\n    const clientOrderId = this.safeString(order, 'cliOrdId');\n    return this.safeOrder({\n      'id': id,\n      'clientOrderId': clientOrderId,\n      'info': order,\n      'timestamp': timestamp,\n      'datetime': this.iso8601(timestamp),\n      'lastTradeTimestamp': lastTradeTimestamp,\n      'status': status,\n      'symbol': symbol,\n      'type': type,\n      'timeInForce': undefined,\n      'postOnly': undefined,\n      'side': side,\n      'price': price,\n      'stopPrice': undefined,\n      'cost': undefined,\n      'amount': amount,\n      'filled': filled,\n      'average': undefined,\n      'remaining': undefined,\n      'fee': undefined,\n      'trades': undefined\n    });\n  }\n\n  async fetchOpenOrders(symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    return this.fetchOrdersWithMethod('private_get_order_active', symbol, since, limit, params);\n  }\n\n  async fetchClosedOrders(symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    return this.fetchOrdersByStatus('filled', symbol, since, limit, params);\n  }\n\n  async fetchCanceledOrders(symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    return this.fetchOrdersByStatus('cancelled', symbol, since, limit, params);\n  }\n\n  async fetchOrdersByStatus(status, symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    const request = {\n      'status': status\n    };\n    return this.fetchOrdersWithMethod('private_get_order_status', symbol, since, limit, this.extend(request, params));\n  }\n\n  async fetchOrdersWithMethod(method, symbol = undefined, since = undefined, limit = undefined, params = {}) {\n    if (symbol === undefined) {\n      throw new ArgumentsRequired(this.id + ' fetchOrdersWithMethod() requires a symbol argument');\n    }\n\n    await this.loadMarkets();\n    const market = this.market(symbol);\n    const request = {\n      'symbol': market['id']\n    };\n\n    if (limit !== undefined) {\n      request['limit'] = limit; // default 100\n    }\n\n    const response = await this[method](this.extend(request, params)); //\n    //     [\n    //         {\n    //             \"orderId\": \"1555492358.126073.126767@0502:2\",\n    //             \"cliOrdId\": \"myNewOrder\",\n    //             \"pairId\": 502,\n    //             \"symbol\": \"LAETH\",\n    //             \"side\": \"buy\",\n    //             \"orderType\": \"limit\",\n    //             \"price\": 136.2,\n    //             \"amount\": 0.57,\n    //             \"orderStatus\": \"partiallyFilled\",\n    //             \"executedAmount\": 0.27,\n    //             \"reaminingAmount\": 0.3,\n    //             \"timeCreated\": 155551580736,\n    //             \"timeFilled\": 0\n    //         }\n    //     ]\n    //\n\n    return this.parseOrders(response, market, since, limit);\n  }\n\n  async fetchOrder(id, symbol = undefined, params = {}) {\n    await this.loadMarkets();\n    const request = {\n      'orderId': id\n    };\n    const response = await this.privateGetOrderGetOrder(this.extend(request, params)); //\n    //     {\n    //         \"orderId\": \"1555492358.126073.126767@0502:2\",\n    //         \"cliOrdId\": \"myNewOrder\",\n    //         \"pairId\": 502,\n    //         \"symbol\": \"LAETH\",\n    //         \"side\": \"buy\",\n    //         \"orderType\": \"limit\",\n    //         \"price\": 136.2,\n    //         \"amount\": 0.57,\n    //         \"orderStatus\": \"partiallyFilled\",\n    //         \"executedAmount\": 0.27,\n    //         \"reaminingAmount\": 0.3,\n    //         \"timeCreated\": 155551580736,\n    //         \"timeFilled\": 0\n    //     }\n    //\n\n    return this.parseOrder(response);\n  }\n\n  async createOrder(symbol, type, side, amount, price = undefined, params = {}) {\n    await this.loadMarkets();\n\n    if (type !== 'limit') {\n      throw new ExchangeError(this.id + ' allows limit orders only');\n    }\n\n    const request = {\n      'symbol': this.marketId(symbol),\n      'side': side,\n      'price': this.priceToPrecision(symbol, price),\n      'amount': this.amountToPrecision(symbol, amount),\n      'orderType': type\n    };\n    const method = this.safeString(this.options, 'createOrderMethod', 'private_post_order_new');\n    const response = await this[method](this.extend(request, params)); //\n    //     {\n    //         \"orderId\":\"1563460093.134037.704945@0370:2\",\n    //         \"cliOrdId\":\"\",\n    //         \"pairId\":370,\n    //         \"symbol\":\"ETHBTC\",\n    //         \"side\":\"sell\",\n    //         \"orderType\":\"limit\",\n    //         \"price\":1.0,\n    //         \"amount\":1.0\n    //     }\n    //\n\n    return this.parseOrder(response);\n  }\n\n  async cancelOrder(id, symbol = undefined, params = {}) {\n    await this.loadMarkets();\n    const request = {\n      'orderId': id\n    };\n    const response = await this.privatePostOrderCancel(this.extend(request, params)); //\n    //     {\n    //         \"orderId\": \"1555492358.126073.126767@0502:2\",\n    //         \"cliOrdId\": \"myNewOrder\",\n    //         \"pairId\": 502,\n    //         \"symbol\": \"LAETH\",\n    //         \"side\": \"buy\",\n    //         \"orderType\": \"limit\",\n    //         \"price\": 136.2,\n    //         \"amount\": 0.57,\n    //         \"orderStatus\": \"partiallyFilled\",\n    //         \"executedAmount\": 0.27,\n    //         \"reaminingAmount\": 0.3,\n    //         \"timeCreated\": 155551580736,\n    //         \"timeFilled\": 0\n    //     }\n    //\n\n    return this.parseOrder(response);\n  }\n\n  async cancelAllOrders(symbol = undefined, params = {}) {\n    if (symbol === undefined) {\n      throw new ArgumentsRequired(this.id + ' cancelAllOrders() requires a symbol argument');\n    }\n\n    await this.loadMarkets();\n    const marketId = this.marketId(symbol);\n    const request = {\n      'symbol': marketId\n    };\n    const response = await this.privatePostOrderCancelAll(this.extend(request, params)); //\n    //     {\n    //         \"pairId\": 502,\n    //         \"symbol\": \"LAETH\",\n    //         \"cancelledOrders\": [\n    //             \"1555492358.126073.126767@0502:2\"\n    //         ]\n    //     }\n    //\n\n    const result = [];\n    const canceledOrders = this.safeValue(response, 'cancelledOrders', []);\n\n    for (let i = 0; i < canceledOrders.length; i++) {\n      const order = this.parseOrder({\n        'symbol': marketId,\n        'orderId': canceledOrders[i],\n        'orderStatus': 'canceled'\n      });\n      result.push(order);\n    }\n\n    return result;\n  }\n\n  sign(path, api = 'public', method = 'GET', params = undefined, headers = undefined, body = undefined) {\n    let request = '/api/' + this.version + '/' + this.implodeParams(path, params);\n    let query = this.omit(params, this.extractParams(path));\n\n    if (api === 'private') {\n      const nonce = this.nonce();\n      query = this.extend({\n        'timestamp': nonce\n      }, query);\n    }\n\n    const urlencodedQuery = this.urlencode(query);\n\n    if (Object.keys(query).length) {\n      request += '?' + urlencodedQuery;\n    }\n\n    if (api === 'private') {\n      this.checkRequiredCredentials();\n      const signature = this.hmac(this.encode(request), this.encode(this.secret));\n      headers = {\n        'X-LA-KEY': this.apiKey,\n        'X-LA-SIGNATURE': signature\n      };\n\n      if (method === 'POST') {\n        headers['Content-Type'] = 'application/x-www-form-urlencoded';\n        body = urlencodedQuery;\n      }\n    }\n\n    const url = this.urls['api'] + request;\n    return {\n      'url': url,\n      'method': method,\n      'body': body,\n      'headers': headers\n    };\n  }\n\n  handleErrors(code, reason, url, method, headers, body, response, requestHeaders, requestBody) {\n    if (!response) {\n      return;\n    } //\n    //     { \"message\": \"Request limit reached!\", \"details\": \"Request limit reached. Maximum allowed: 1 per 1s. Please try again in 1 second(s).\" }\n    //     { \"error\": { \"message\": \"Pair 370 is not found\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n    //     { \"error\": { \"message\": \"Signature or ApiKey is not valid\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n    //     { \"error\": { \"message\": \"Request is out of time\", \"errorType\": \"RequestError\", \"statusCode\":400 }}\n    //     { \"error\": { \"message\": \"Price needs to be greater than 0\",\"errorType\":\"ValidationError\",\"statusCode\":400 }}\n    //     { \"error\": { \"message\": \"Side is not valid, Price needs to be greater than 0, Amount needs to be greater than 0, The Symbol field is required., OrderType is not valid\",\"errorType\":\"ValidationError\",\"statusCode\":400 }}\n    //     { \"error\": { \"message\": \"Cancelable order whit ID 1563460289.571254.704945@0370:1 not found\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n    //     { \"error\": { \"message\": \"Symbol must be specified\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n    //     { \"error\": { \"message\": \"Order 1563460289.571254.704945@0370:1 is not found\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n    //\n\n\n    const message = this.safeString(response, 'message');\n    const feedback = this.id + ' ' + body;\n\n    if (message !== undefined) {\n      this.throwExactlyMatchedException(this.exceptions['exact'], message, feedback);\n      this.throwBroadlyMatchedException(this.exceptions['broad'], message, feedback);\n    }\n\n    const error = this.safeValue(response, 'error', {});\n    const errorMessage = this.safeString(error, 'message');\n\n    if (errorMessage !== undefined) {\n      this.throwExactlyMatchedException(this.exceptions['exact'], errorMessage, feedback);\n      this.throwBroadlyMatchedException(this.exceptions['broad'], errorMessage, feedback);\n      throw new ExchangeError(feedback); // unknown message\n    }\n  }\n\n};","map":{"version":3,"sources":["C:/Users/James Price/Documents/VS Code/bixpro/node_modules/ccxt/js/latoken.js"],"names":["Exchange","require","ExchangeError","ArgumentsRequired","InvalidNonce","OrderNotFound","InvalidOrder","DDoSProtection","BadRequest","AuthenticationError","Precise","module","exports","latoken","describe","deepExtend","userAgents","nonce","milliseconds","fetchTime","params","response","publicGetExchangeInfoTime","safeInteger","fetchMarkets","publicGetExchangeInfoPairs","result","i","length","market","id","safeString","baseId","quoteId","numericId","base","safeCurrencyCode","quote","symbol","pricePrecisionString","priceLimit","parsePrecision","precision","parseInt","limits","safeNumber","undefined","parseNumber","push","fetchCurrencies","publicGetExchangeInfoCurrencies","currency","code","fee","active","fetchBalance","loadMarkets","privateGetAccountBalances","balance","currencyId","frozen","pending","account","stringAdd","parseBalance","fetchOrderBook","limit","request","publicGetMarketDataOrderBookSymbolLimit","extend","parseOrderBook","parseTicker","ticker","marketId","safeSymbol","open","close","change","percentage","timestamp","iso8601","fetchTicker","publicGetMarketDataTickerSymbol","fetchTickers","symbols","publicGetMarketDataTickers","filterByArray","parseTrade","trade","type","safeInteger2","priceString","amountString","price","amount","cost","stringMul","side","orderId","feeCost","fetchTrades","since","publicGetMarketDataTradesSymbol","trades","safeValue","parseTrades","fetchMyTrades","privateGetOrderTrades","parseOrderStatus","status","statuses","parseOrder","order","safeTimestamp","filled","timeFilled","lastTradeTimestamp","clientOrderId","safeOrder","fetchOpenOrders","fetchOrdersWithMethod","fetchClosedOrders","fetchOrdersByStatus","fetchCanceledOrders","method","parseOrders","fetchOrder","privateGetOrderGetOrder","createOrder","priceToPrecision","amountToPrecision","options","cancelOrder","privatePostOrderCancel","cancelAllOrders","privatePostOrderCancelAll","canceledOrders","sign","path","api","headers","body","version","implodeParams","query","omit","extractParams","urlencodedQuery","urlencode","Object","keys","checkRequiredCredentials","signature","hmac","encode","secret","apiKey","url","urls","handleErrors","reason","requestHeaders","requestBody","message","feedback","throwExactlyMatchedException","exceptions","throwBroadlyMatchedException","error","errorMessage"],"mappings":"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","sourcesContent":["'use strict';\n\n//  ---------------------------------------------------------------------------\n\nconst Exchange = require ('./base/Exchange');\nconst { ExchangeError, ArgumentsRequired, InvalidNonce, OrderNotFound, InvalidOrder, DDoSProtection, BadRequest, AuthenticationError } = require ('./base/errors');\nconst Precise = require ('./base/Precise');\n\n//  ---------------------------------------------------------------------------\n\nmodule.exports = class latoken extends Exchange {\n    describe () {\n        return this.deepExtend (super.describe (), {\n            'id': 'latoken',\n            'name': 'Latoken',\n            'countries': [ 'KY' ], // Cayman Islands\n            'version': 'v1',\n            'rateLimit': 2000,\n            'certified': false,\n            'userAgent': this.userAgents['chrome'],\n            'has': {\n                'CORS': false,\n                'publicAPI': true,\n                'privateAPI': true,\n                'cancelOrder': true,\n                'cancelAllOrders': true,\n                'createMarketOrder': false,\n                'createOrder': true,\n                'fetchBalance': true,\n                'fetchCanceledOrders': true,\n                'fetchClosedOrders': true,\n                'fetchCurrencies': true,\n                'fetchMyTrades': true,\n                'fetchOpenOrders': true,\n                'fetchOrder': false,\n                'fetchOrdersByStatus': true,\n                'fetchOrderBook': true,\n                'fetchTicker': true,\n                'fetchTickers': true,\n                'fetchTime': true,\n                'fetchTrades': true,\n            },\n            'urls': {\n                'logo': 'https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg',\n                'api': 'https://api.latoken.com',\n                'www': 'https://latoken.com',\n                'doc': [\n                    'https://api.latoken.com',\n                ],\n            },\n            'api': {\n                'public': {\n                    'get': [\n                        'ExchangeInfo/time',\n                        'ExchangeInfo/limits',\n                        'ExchangeInfo/pairs',\n                        'ExchangeInfo/pairs/{currency}',\n                        'ExchangeInfo/pair',\n                        'ExchangeInfo/currencies',\n                        'ExchangeInfo/currencies/{symbol}',\n                        'MarketData/tickers',\n                        'MarketData/ticker/{symbol}',\n                        'MarketData/orderBook/{symbol}',\n                        'MarketData/orderBook/{symbol}/{limit}',\n                        'MarketData/trades/{symbol}',\n                        'MarketData/trades/{symbol}/{limit}',\n                    ],\n                },\n                'private': {\n                    'get': [\n                        'Account/balances',\n                        'Account/balances/{currency}',\n                        'Order/status',\n                        'Order/active',\n                        'Order/get_order',\n                        'Order/trades',\n                    ],\n                    'post': [\n                        'Order/new',\n                        'Order/test-order',\n                        'Order/cancel',\n                        'Order/cancel_all',\n                    ],\n                },\n            },\n            'fees': {\n                'trading': {\n                    'feeSide': 'get',\n                    'tierBased': false,\n                    'percentage': true,\n                    'maker': 0.1 / 100,\n                    'taker': 0.1 / 100,\n                },\n            },\n            'commonCurrencies': {\n                'MT': 'Monarch',\n                'TSL': 'Treasure SL',\n            },\n            'options': {\n                'createOrderMethod': 'private_post_order_new', // private_post_order_test_order\n            },\n            'exceptions': {\n                'exact': {\n                    'Signature or ApiKey is not valid': AuthenticationError,\n                    'Request is out of time': InvalidNonce,\n                    'Symbol must be specified': BadRequest,\n                },\n                'broad': {\n                    'Request limit reached': DDoSProtection,\n                    'Pair': BadRequest,\n                    'Price needs to be greater than': InvalidOrder,\n                    'Amount needs to be greater than': InvalidOrder,\n                    'The Symbol field is required': InvalidOrder,\n                    'OrderType is not valid': InvalidOrder,\n                    'Side is not valid': InvalidOrder,\n                    'Cancelable order whit': OrderNotFound,\n                    'Order': OrderNotFound,\n                },\n            },\n        });\n    }\n\n    nonce () {\n        return this.milliseconds ();\n    }\n\n    async fetchTime (params = {}) {\n        const response = await this.publicGetExchangeInfoTime (params);\n        //\n        //     {\n        //         \"time\": \"2019-04-18T9:00:00.0Z\",\n        //         \"unixTimeSeconds\": 1555578000,\n        //         \"unixTimeMiliseconds\": 1555578000000\n        //     }\n        //\n        return this.safeInteger (response, 'unixTimeMiliseconds');\n    }\n\n    async fetchMarkets (params = {}) {\n        const response = await this.publicGetExchangeInfoPairs (params);\n        //\n        //     [\n        //         {\n        //             \"pairId\": 502,\n        //             \"symbol\": \"LAETH\",\n        //             \"baseCurrency\": \"LA\",\n        //             \"quotedCurrency\": \"ETH\",\n        //             \"makerFee\": 0.01,\n        //             \"takerFee\": 0.01,\n        //             \"pricePrecision\": 8,\n        //             \"amountPrecision\": 8,\n        //             \"minQty\": 0.1\n        //         }\n        //     ]\n        //\n        const result = [];\n        for (let i = 0; i < response.length; i++) {\n            const market = response[i];\n            const id = this.safeString (market, 'symbol');\n            // the exchange shows them inverted\n            const baseId = this.safeString (market, 'baseCurrency');\n            const quoteId = this.safeString (market, 'quotedCurrency');\n            const numericId = this.safeInteger (market, 'pairId');\n            const base = this.safeCurrencyCode (baseId);\n            const quote = this.safeCurrencyCode (quoteId);\n            const symbol = base + '/' + quote;\n            const pricePrecisionString = this.safeString (market, 'pricePrecision');\n            const priceLimit = this.parsePrecision (pricePrecisionString);\n            const precision = {\n                'price': parseInt (pricePrecisionString),\n                'amount': this.safeInteger (market, 'amountPrecision'),\n            };\n            const limits = {\n                'amount': {\n                    'min': this.safeNumber (market, 'minQty'),\n                    'max': undefined,\n                },\n                'price': {\n                    'min': this.parseNumber (priceLimit),\n                    'max': undefined,\n                },\n                'cost': {\n                    'min': undefined,\n                    'max': undefined,\n                },\n            };\n            result.push ({\n                'id': id,\n                'numericId': numericId,\n                'info': market,\n                'symbol': symbol,\n                'base': base,\n                'quote': quote,\n                'baseId': baseId,\n                'quoteId': quoteId,\n                'active': undefined, // assuming true\n                'precision': precision,\n                'limits': limits,\n            });\n        }\n        return result;\n    }\n\n    async fetchCurrencies (params = {}) {\n        const response = await this.publicGetExchangeInfoCurrencies (params);\n        //\n        //     [\n        //         {\n        //             \"currencyId\": 102,\n        //             \"symbol\": \"LA\",\n        //             \"name\": \"Latoken\",\n        //             \"precission\": 8,\n        //             \"type\": \"ERC20\",\n        //             \"fee\": 0.1\n        //         }\n        //     ]\n        //\n        const result = {};\n        for (let i = 0; i < response.length; i++) {\n            const currency = response[i];\n            const id = this.safeString (currency, 'symbol');\n            const numericId = this.safeInteger (currency, 'currencyId');\n            const code = this.safeCurrencyCode (id);\n            const precision = this.safeInteger (currency, 'precission');\n            const fee = this.safeNumber (currency, 'fee');\n            const active = undefined;\n            result[code] = {\n                'id': id,\n                'numericId': numericId,\n                'code': code,\n                'info': currency,\n                'name': code,\n                'active': active,\n                'fee': fee,\n                'precision': precision,\n                'limits': {\n                    'amount': {\n                        'min': undefined,\n                        'max': undefined,\n                    },\n                    'withdraw': {\n                        'min': undefined,\n                        'max': undefined,\n                    },\n                },\n            };\n        }\n        return result;\n    }\n\n    async fetchBalance (params = {}) {\n        await this.loadMarkets ();\n        const response = await this.privateGetAccountBalances (params);\n        //\n        //     [\n        //         {\n        //             \"currencyId\": 102,\n        //             \"symbol\": \"LA\",\n        //             \"name\": \"Latoken\",\n        //             \"amount\": 1054.66,\n        //             \"available\": 900.66,\n        //             \"frozen\": 154,\n        //             \"pending\": 0\n        //         }\n        //     ]\n        //\n        const result = {\n            'info': response,\n            'timestamp': undefined,\n            'datetime': undefined,\n        };\n        for (let i = 0; i < response.length; i++) {\n            const balance = response[i];\n            const currencyId = this.safeString (balance, 'symbol');\n            const code = this.safeCurrencyCode (currencyId);\n            const frozen = this.safeString (balance, 'frozen');\n            const pending = this.safeString (balance, 'pending');\n            const account = this.account ();\n            account['used'] = Precise.stringAdd (frozen, pending);\n            account['free'] = this.safeString (balance, 'available');\n            account['total'] = this.safeString (balance, 'amount');\n            result[code] = account;\n        }\n        return this.parseBalance (result, false);\n    }\n\n    async fetchOrderBook (symbol, limit = undefined, params = {}) {\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'symbol': market['id'],\n            'limit': 10,\n        };\n        if (limit !== undefined) {\n            request['limit'] = limit; // default 10, max 100\n        }\n        const response = await this.publicGetMarketDataOrderBookSymbolLimit (this.extend (request, params));\n        //\n        //     {\n        //         \"pairId\": 502,\n        //         \"symbol\": \"LAETH\",\n        //         \"spread\": 0.07,\n        //         \"asks\": [\n        //             { \"price\": 136.3, \"quantity\": 7.024 }\n        //         ],\n        //         \"bids\": [\n        //             { \"price\": 136.2, \"quantity\": 6.554 }\n        //         ]\n        //     }\n        //\n        return this.parseOrderBook (response, symbol, undefined, 'bids', 'asks', 'price', 'quantity');\n    }\n\n    parseTicker (ticker, market = undefined) {\n        //\n        //     {\n        //         \"pairId\":\"63b41092-f3f6-4ea4-9e7c-4525ed250dad\",\n        //         \"symbol\":\"ETHBTC\",\n        //         \"volume\":11317.037494474000000000,\n        //         \"open\":0.020033000000000000,\n        //         \"low\":0.019791000000000000,\n        //         \"high\":0.020375000000000000,\n        //         \"close\":0.019923000000000000,\n        //         \"priceChange\":-0.1500\n        //     }\n        //\n        const marketId = this.safeString (ticker, 'symbol');\n        const symbol = this.safeSymbol (marketId, market);\n        const open = this.safeNumber (ticker, 'open');\n        const close = this.safeNumber (ticker, 'close');\n        let change = undefined;\n        if (open !== undefined && close !== undefined) {\n            change = close - open;\n        }\n        const percentage = this.safeNumber (ticker, 'priceChange');\n        const timestamp = this.nonce ();\n        return {\n            'symbol': symbol,\n            'timestamp': timestamp,\n            'datetime': this.iso8601 (timestamp),\n            'low': this.safeNumber (ticker, 'low'),\n            'high': this.safeNumber (ticker, 'high'),\n            'bid': undefined,\n            'bidVolume': undefined,\n            'ask': undefined,\n            'askVolume': undefined,\n            'vwap': undefined,\n            'open': open,\n            'close': close,\n            'last': close,\n            'previousClose': undefined,\n            'change': change,\n            'percentage': percentage,\n            'average': undefined,\n            'baseVolume': undefined,\n            'quoteVolume': this.safeNumber (ticker, 'volume'),\n            'info': ticker,\n        };\n    }\n\n    async fetchTicker (symbol, params = {}) {\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'symbol': market['id'],\n        };\n        const response = await this.publicGetMarketDataTickerSymbol (this.extend (request, params));\n        //\n        //     {\n        //         \"pairId\": 502,\n        //         \"symbol\": \"LAETH\",\n        //         \"volume\": 1023314.3202,\n        //         \"open\": 134.82,\n        //         \"low\": 133.95,\n        //         \"high\": 136.22,\n        //         \"close\": 135.12,\n        //         \"priceChange\": 0.22\n        //     }\n        //\n        return this.parseTicker (response, market);\n    }\n\n    async fetchTickers (symbols = undefined, params = {}) {\n        await this.loadMarkets ();\n        const response = await this.publicGetMarketDataTickers (params);\n        //\n        //     [\n        //         {\n        //             \"pairId\": 502,\n        //             \"symbol\": \"LAETH\",\n        //             \"volume\": 1023314.3202,\n        //             \"open\": 134.82,\n        //             \"low\": 133.95,\n        //             \"high\": 136.22,\n        //             \"close\": 135.12,\n        //             \"priceChange\": 0.22\n        //         }\n        //     ]\n        //\n        const result = {};\n        for (let i = 0; i < response.length; i++) {\n            const ticker = this.parseTicker (response[i]);\n            const symbol = ticker['symbol'];\n            result[symbol] = ticker;\n        }\n        return this.filterByArray (result, 'symbol', symbols);\n    }\n\n    parseTrade (trade, market = undefined) {\n        //\n        // fetchTrades (public)\n        //\n        //     {\n        //         side: 'buy',\n        //         price: 0.33634,\n        //         amount: 0.01,\n        //         timestamp: 1564240008000 // milliseconds\n        //     }\n        //\n        // fetchMyTrades (private)\n        //\n        //     {\n        //         id: '1564223032.892829.3.tg15',\n        //         orderId: '1564223032.671436.707548@1379:1',\n        //         commission: 0,\n        //         side: 'buy',\n        //         price: 0.32874,\n        //         amount: 0.607,\n        //         timestamp: 1564223033 // seconds\n        //     }\n        //\n        const type = undefined;\n        let timestamp = this.safeInteger2 (trade, 'timestamp', 'time');\n        if (timestamp !== undefined) {\n            // 03 Jan 2009 - first block\n            if (timestamp < 1230940800000) {\n                timestamp *= 1000;\n            }\n        }\n        const priceString = this.safeString (trade, 'price');\n        const amountString = this.safeString (trade, 'amount');\n        const price = this.parseNumber (priceString);\n        const amount = this.parseNumber (amountString);\n        const cost = this.parseNumber (Precise.stringMul (priceString, amountString));\n        const side = this.safeString (trade, 'side');\n        let symbol = undefined;\n        if (market !== undefined) {\n            symbol = market['symbol'];\n        }\n        const id = this.safeString (trade, 'id');\n        const orderId = this.safeString (trade, 'orderId');\n        const feeCost = this.safeNumber (trade, 'commission');\n        let fee = undefined;\n        if (feeCost !== undefined) {\n            fee = {\n                'cost': feeCost,\n                'currency': undefined,\n            };\n        }\n        return {\n            'info': trade,\n            'timestamp': timestamp,\n            'datetime': this.iso8601 (timestamp),\n            'symbol': symbol,\n            'id': id,\n            'order': orderId,\n            'type': type,\n            'takerOrMaker': undefined,\n            'side': side,\n            'price': price,\n            'amount': amount,\n            'cost': cost,\n            'fee': fee,\n        };\n    }\n\n    async fetchTrades (symbol, since = undefined, limit = undefined, params = {}) {\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'symbol': market['id'],\n        };\n        if (limit !== undefined) {\n            request['limit'] = limit; // default 50, max 100\n        }\n        const response = await this.publicGetMarketDataTradesSymbol (this.extend (request, params));\n        //\n        //     {\n        //         \"pairId\":370,\n        //         \"symbol\":\"ETHBTC\",\n        //         \"tradeCount\":51,\n        //         \"trades\": [\n        //             {\n        //                 side: 'buy',\n        //                 price: 0.33634,\n        //                 amount: 0.01,\n        //                 timestamp: 1564240008000 // milliseconds\n        //             }\n        //         ]\n        //     }\n        //\n        const trades = this.safeValue (response, 'trades', []);\n        return this.parseTrades (trades, market, since, limit);\n    }\n\n    async fetchMyTrades (symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        if (symbol === undefined) {\n            throw new ArgumentsRequired (this.id + ' fetchMyTrades() requires a symbol argument');\n        }\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'symbol': market['id'],\n        };\n        const response = await this.privateGetOrderTrades (this.extend (request, params));\n        //\n        //     {\n        //         \"pairId\": 502,\n        //         \"symbol\": \"LAETH\",\n        //         \"tradeCount\": 1,\n        //         \"trades\": [\n        //             {\n        //                 id: '1564223032.892829.3.tg15',\n        //                 orderId: '1564223032.671436.707548@1379:1',\n        //                 commission: 0,\n        //                 side: 'buy',\n        //                 price: 0.32874,\n        //                 amount: 0.607,\n        //                 timestamp: 1564223033 // seconds\n        //             }\n        //         ]\n        //     }\n        //\n        const trades = this.safeValue (response, 'trades', []);\n        return this.parseTrades (trades, market, since, limit);\n    }\n\n    parseOrderStatus (status) {\n        const statuses = {\n            'active': 'open',\n            'partiallyFilled': 'open',\n            'filled': 'closed',\n            'cancelled': 'canceled',\n        };\n        return this.safeString (statuses, status, status);\n    }\n\n    parseOrder (order, market = undefined) {\n        //\n        // createOrder\n        //\n        //     {\n        //         \"orderId\":\"1563460093.134037.704945@0370:2\",\n        //         \"cliOrdId\":\"\",\n        //         \"pairId\":370,\n        //         \"symbol\":\"ETHBTC\",\n        //         \"side\":\"sell\",\n        //         \"orderType\":\"limit\",\n        //         \"price\":1.0,\n        //         \"amount\":1.0\n        //     }\n        //\n        // cancelOrder, fetchOrder, fetchOpenOrders, fetchClosedOrders, fetchCanceledOrders\n        //\n        //     {\n        //         \"orderId\": \"1555492358.126073.126767@0502:2\",\n        //         \"cliOrdId\": \"myNewOrder\",\n        //         \"pairId\": 502,\n        //         \"symbol\": \"LAETH\",\n        //         \"side\": \"buy\",\n        //         \"orderType\": \"limit\",\n        //         \"price\": 136.2,\n        //         \"amount\": 0.57,\n        //         \"orderStatus\": \"partiallyFilled\",\n        //         \"executedAmount\": 0.27,\n        //         \"reaminingAmount\": 0.3,\n        //         \"timeCreated\": 155551580736,\n        //         \"timeFilled\": 0\n        //     }\n        //\n        const id = this.safeString (order, 'orderId');\n        const timestamp = this.safeTimestamp (order, 'timeCreated');\n        const marketId = this.safeString (order, 'symbol');\n        const symbol = this.safeSymbol (marketId, market);\n        const side = this.safeString (order, 'side');\n        const type = this.safeString (order, 'orderType');\n        const price = this.safeNumber (order, 'price');\n        const amount = this.safeNumber (order, 'amount');\n        const filled = this.safeNumber (order, 'executedAmount');\n        const status = this.parseOrderStatus (this.safeString (order, 'orderStatus'));\n        const timeFilled = this.safeTimestamp (order, 'timeFilled');\n        let lastTradeTimestamp = undefined;\n        if ((timeFilled !== undefined) && (timeFilled > 0)) {\n            lastTradeTimestamp = timeFilled;\n        }\n        const clientOrderId = this.safeString (order, 'cliOrdId');\n        return this.safeOrder ({\n            'id': id,\n            'clientOrderId': clientOrderId,\n            'info': order,\n            'timestamp': timestamp,\n            'datetime': this.iso8601 (timestamp),\n            'lastTradeTimestamp': lastTradeTimestamp,\n            'status': status,\n            'symbol': symbol,\n            'type': type,\n            'timeInForce': undefined,\n            'postOnly': undefined,\n            'side': side,\n            'price': price,\n            'stopPrice': undefined,\n            'cost': undefined,\n            'amount': amount,\n            'filled': filled,\n            'average': undefined,\n            'remaining': undefined,\n            'fee': undefined,\n            'trades': undefined,\n        });\n    }\n\n    async fetchOpenOrders (symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        return this.fetchOrdersWithMethod ('private_get_order_active', symbol, since, limit, params);\n    }\n\n    async fetchClosedOrders (symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        return this.fetchOrdersByStatus ('filled', symbol, since, limit, params);\n    }\n\n    async fetchCanceledOrders (symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        return this.fetchOrdersByStatus ('cancelled', symbol, since, limit, params);\n    }\n\n    async fetchOrdersByStatus (status, symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        const request = {\n            'status': status,\n        };\n        return this.fetchOrdersWithMethod ('private_get_order_status', symbol, since, limit, this.extend (request, params));\n    }\n\n    async fetchOrdersWithMethod (method, symbol = undefined, since = undefined, limit = undefined, params = {}) {\n        if (symbol === undefined) {\n            throw new ArgumentsRequired (this.id + ' fetchOrdersWithMethod() requires a symbol argument');\n        }\n        await this.loadMarkets ();\n        const market = this.market (symbol);\n        const request = {\n            'symbol': market['id'],\n        };\n        if (limit !== undefined) {\n            request['limit'] = limit; // default 100\n        }\n        const response = await this[method] (this.extend (request, params));\n        //\n        //     [\n        //         {\n        //             \"orderId\": \"1555492358.126073.126767@0502:2\",\n        //             \"cliOrdId\": \"myNewOrder\",\n        //             \"pairId\": 502,\n        //             \"symbol\": \"LAETH\",\n        //             \"side\": \"buy\",\n        //             \"orderType\": \"limit\",\n        //             \"price\": 136.2,\n        //             \"amount\": 0.57,\n        //             \"orderStatus\": \"partiallyFilled\",\n        //             \"executedAmount\": 0.27,\n        //             \"reaminingAmount\": 0.3,\n        //             \"timeCreated\": 155551580736,\n        //             \"timeFilled\": 0\n        //         }\n        //     ]\n        //\n        return this.parseOrders (response, market, since, limit);\n    }\n\n    async fetchOrder (id, symbol = undefined, params = {}) {\n        await this.loadMarkets ();\n        const request = {\n            'orderId': id,\n        };\n        const response = await this.privateGetOrderGetOrder (this.extend (request, params));\n        //\n        //     {\n        //         \"orderId\": \"1555492358.126073.126767@0502:2\",\n        //         \"cliOrdId\": \"myNewOrder\",\n        //         \"pairId\": 502,\n        //         \"symbol\": \"LAETH\",\n        //         \"side\": \"buy\",\n        //         \"orderType\": \"limit\",\n        //         \"price\": 136.2,\n        //         \"amount\": 0.57,\n        //         \"orderStatus\": \"partiallyFilled\",\n        //         \"executedAmount\": 0.27,\n        //         \"reaminingAmount\": 0.3,\n        //         \"timeCreated\": 155551580736,\n        //         \"timeFilled\": 0\n        //     }\n        //\n        return this.parseOrder (response);\n    }\n\n    async createOrder (symbol, type, side, amount, price = undefined, params = {}) {\n        await this.loadMarkets ();\n        if (type !== 'limit') {\n            throw new ExchangeError (this.id + ' allows limit orders only');\n        }\n        const request = {\n            'symbol': this.marketId (symbol),\n            'side': side,\n            'price': this.priceToPrecision (symbol, price),\n            'amount': this.amountToPrecision (symbol, amount),\n            'orderType': type,\n        };\n        const method = this.safeString (this.options, 'createOrderMethod', 'private_post_order_new');\n        const response = await this[method] (this.extend (request, params));\n        //\n        //     {\n        //         \"orderId\":\"1563460093.134037.704945@0370:2\",\n        //         \"cliOrdId\":\"\",\n        //         \"pairId\":370,\n        //         \"symbol\":\"ETHBTC\",\n        //         \"side\":\"sell\",\n        //         \"orderType\":\"limit\",\n        //         \"price\":1.0,\n        //         \"amount\":1.0\n        //     }\n        //\n        return this.parseOrder (response);\n    }\n\n    async cancelOrder (id, symbol = undefined, params = {}) {\n        await this.loadMarkets ();\n        const request = {\n            'orderId': id,\n        };\n        const response = await this.privatePostOrderCancel (this.extend (request, params));\n        //\n        //     {\n        //         \"orderId\": \"1555492358.126073.126767@0502:2\",\n        //         \"cliOrdId\": \"myNewOrder\",\n        //         \"pairId\": 502,\n        //         \"symbol\": \"LAETH\",\n        //         \"side\": \"buy\",\n        //         \"orderType\": \"limit\",\n        //         \"price\": 136.2,\n        //         \"amount\": 0.57,\n        //         \"orderStatus\": \"partiallyFilled\",\n        //         \"executedAmount\": 0.27,\n        //         \"reaminingAmount\": 0.3,\n        //         \"timeCreated\": 155551580736,\n        //         \"timeFilled\": 0\n        //     }\n        //\n        return this.parseOrder (response);\n    }\n\n    async cancelAllOrders (symbol = undefined, params = {}) {\n        if (symbol === undefined) {\n            throw new ArgumentsRequired (this.id + ' cancelAllOrders() requires a symbol argument');\n        }\n        await this.loadMarkets ();\n        const marketId = this.marketId (symbol);\n        const request = {\n            'symbol': marketId,\n        };\n        const response = await this.privatePostOrderCancelAll (this.extend (request, params));\n        //\n        //     {\n        //         \"pairId\": 502,\n        //         \"symbol\": \"LAETH\",\n        //         \"cancelledOrders\": [\n        //             \"1555492358.126073.126767@0502:2\"\n        //         ]\n        //     }\n        //\n        const result = [];\n        const canceledOrders = this.safeValue (response, 'cancelledOrders', []);\n        for (let i = 0; i < canceledOrders.length; i++) {\n            const order = this.parseOrder ({\n                'symbol': marketId,\n                'orderId': canceledOrders[i],\n                'orderStatus': 'canceled',\n            });\n            result.push (order);\n        }\n        return result;\n    }\n\n    sign (path, api = 'public', method = 'GET', params = undefined, headers = undefined, body = undefined) {\n        let request = '/api/' + this.version + '/' + this.implodeParams (path, params);\n        let query = this.omit (params, this.extractParams (path));\n        if (api === 'private') {\n            const nonce = this.nonce ();\n            query = this.extend ({\n                'timestamp': nonce,\n            }, query);\n        }\n        const urlencodedQuery = this.urlencode (query);\n        if (Object.keys (query).length) {\n            request += '?' + urlencodedQuery;\n        }\n        if (api === 'private') {\n            this.checkRequiredCredentials ();\n            const signature = this.hmac (this.encode (request), this.encode (this.secret));\n            headers = {\n                'X-LA-KEY': this.apiKey,\n                'X-LA-SIGNATURE': signature,\n            };\n            if (method === 'POST') {\n                headers['Content-Type'] = 'application/x-www-form-urlencoded';\n                body = urlencodedQuery;\n            }\n        }\n        const url = this.urls['api'] + request;\n        return { 'url': url, 'method': method, 'body': body, 'headers': headers };\n    }\n\n    handleErrors (code, reason, url, method, headers, body, response, requestHeaders, requestBody) {\n        if (!response) {\n            return;\n        }\n        //\n        //     { \"message\": \"Request limit reached!\", \"details\": \"Request limit reached. Maximum allowed: 1 per 1s. Please try again in 1 second(s).\" }\n        //     { \"error\": { \"message\": \"Pair 370 is not found\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n        //     { \"error\": { \"message\": \"Signature or ApiKey is not valid\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n        //     { \"error\": { \"message\": \"Request is out of time\", \"errorType\": \"RequestError\", \"statusCode\":400 }}\n        //     { \"error\": { \"message\": \"Price needs to be greater than 0\",\"errorType\":\"ValidationError\",\"statusCode\":400 }}\n        //     { \"error\": { \"message\": \"Side is not valid, Price needs to be greater than 0, Amount needs to be greater than 0, The Symbol field is required., OrderType is not valid\",\"errorType\":\"ValidationError\",\"statusCode\":400 }}\n        //     { \"error\": { \"message\": \"Cancelable order whit ID 1563460289.571254.704945@0370:1 not found\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n        //     { \"error\": { \"message\": \"Symbol must be specified\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n        //     { \"error\": { \"message\": \"Order 1563460289.571254.704945@0370:1 is not found\",\"errorType\":\"RequestError\",\"statusCode\":400 }}\n        //\n        const message = this.safeString (response, 'message');\n        const feedback = this.id + ' ' + body;\n        if (message !== undefined) {\n            this.throwExactlyMatchedException (this.exceptions['exact'], message, feedback);\n            this.throwBroadlyMatchedException (this.exceptions['broad'], message, feedback);\n        }\n        const error = this.safeValue (response, 'error', {});\n        const errorMessage = this.safeString (error, 'message');\n        if (errorMessage !== undefined) {\n            this.throwExactlyMatchedException (this.exceptions['exact'], errorMessage, feedback);\n            this.throwBroadlyMatchedException (this.exceptions['broad'], errorMessage, feedback);\n            throw new ExchangeError (feedback); // unknown message\n        }\n    }\n};\n"]},"metadata":{},"sourceType":"script"}